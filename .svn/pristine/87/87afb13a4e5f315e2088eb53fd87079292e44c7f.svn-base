{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\components/assets\\Script\\gamecore\\components\\Comp_SplashScreen.ts"],"names":[],"mappings":";;;;;AAAA,uDAAkD;AAElD,8DAAyD;AAEzD,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAE1C;;GAEG;AAGH;IAA+C,qCAAY;IAD3D;QAAA,qEA8EC;QAvEG,mBAAa,GAAU,EAAE,CAAC;QAM1B,cAAQ,GAAU,CAAC,CAAC;QA2BZ,iBAAW,GAAU,CAAC,CAAC;;IAsCnC,CAAC;IA1DG,iCAAK,GAAL;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;QAEzC,OAAO;QACP,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,IAAI,QAAM,GAAqB,IAAI,CAAC;YACpC,qBAAW,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,EACpD;gBACI,QAAM,CAAC,uBAAuB,EAAE,CAAC;YACrC,CAAC,CAAC,CAAC;SACV;IACL,CAAC;IAGO,mDAAuB,GAA/B;QACI,EAAE,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IACjC,CAAC;IAIO,2CAAe,GAAvB;QACI,IAAI,CAAC,WAAW,IAAI,GAAG,CAAC;QAExB,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC3D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAEtC,sEAAsE;YACtE,iBAAiB;YACjB,sEAAsE;YACtE,QAAQ;YACR,IAAI,aAAa,GAAoB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,0BAAgB,CAAC,CAAC;YAC9E,IAAI,aAAa,EAAE;gBACf,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;gBACvC,aAAa,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAEhC,IAAI,QAAM,GAAqB,IAAI,CAAC;gBACpC,UAAU,CAAC;oBACP,qBAAW,CAAC,YAAY,CAAC,SAAS,CAAC,QAAM,CAAC,aAAa,CAAC,CAAC;gBAC7D,CAAC,EAAE,GAAG,CAAC,CAAC;gBACR,OAAO;aACV;iBAAM;gBACH,qBAAW,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC1D;YACD,sEAAsE;SACzE;IACL,CAAC;IAKD,iBAAiB;IAGjB,qCAAS,GAAT;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC1C,CAAC;IArED;QAJC,QAAQ,CAAC;YACN,OAAO,EAAC,cAAc;YACtB,WAAW,EAAC,MAAM;SACrB,CAAC;4DACwB;IAM1B;QAHC,QAAQ,CAAC;YACN,WAAW,EAAC,SAAS;SACxB,CAAC;uDACkB;IAZH,iBAAiB;QADrC,OAAO;OACa,iBAAiB,CA6ErC;IAAD,wBAAC;CA7ED,AA6EC,CA7E8C,EAAE,CAAC,SAAS,GA6E1D;kBA7EoB,iBAAiB","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\components","sourcesContent":["import GameManager from \"../managers/GameManager\";\nimport GameSceneManager from \"../../module/init/GameSceneManager\";\nimport LoadingSceneMain from \"../scene/LoadingSceneMain\";\n\n// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n/**\n * 启动屏场景。该脚本请挂载在场景下\n */\n\n@ccclass\nexport default class Comp_SplashScreen extends cc.Component {\n\n    @property({\n        tooltip:\"该场景过后进入的场景名称\",\n        displayName:\"主场景名\"\n    })\n    mainSceneName:string = \"\";\n\n\n    @property({\n        displayName:\"停留时间(秒)\"\n    })\n    showTime:number = 2;\n\n    // onLoad () {}\n\n    //主场景是否已加载完成\n    private _mainSceneLoaded:boolean;\n\n    start () {\n        this.schedule(this.doShowMainScene, 0.1);\n\n        //预加载场景\n        if (this.mainSceneName) {\n            let script:Comp_SplashScreen = this;\n            GameManager.sceneManager.preloadScene(this.mainSceneName, \n                function():void {\n                    script.mainSceneLoadedCallback();\n                });\n        }\n    }\n\n\n    private mainSceneLoadedCallback():void {\n        cc.info(\"【mainSceneLoadedCallback】\", this);\n        this._mainSceneLoaded = true;\n    }\n\n\n    private _passedTime:number = 0;\n    private doShowMainScene():void {\n        this._passedTime += 0.1;\n\n        if (this._passedTime > this.showTime && this._mainSceneLoaded) {\n            this.unschedule(this.doShowMainScene);\n\n            //====================================================================\n            //尝试将加载场景通过动画方式移除\n            //====================================================================\n            //移除加载场景\n            let loadingScript:LoadingSceneMain = this.node.getComponent(LoadingSceneMain);\n            if (loadingScript) {\n                cc.info(\"【sceneLoadedCallback】释放加载场景\");\n                loadingScript.doPreDestory(0.3);\n                \n                let script:Comp_SplashScreen = this;\n                setTimeout(function():void {\n                    GameManager.sceneManager.pushScene(script.mainSceneName);\n                }, 400);\n                return;\n            } else {\n                GameManager.sceneManager.pushScene(this.mainSceneName);\n            }\n            //====================================================================\n        }\n    }\n\n\n\n\n    // update (dt) {}\n\n\n    onDestroy() {\n        this.unschedule(this.doShowMainScene);\n    }\n\n}\n"]}