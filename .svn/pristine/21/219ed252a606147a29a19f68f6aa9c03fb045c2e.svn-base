

const {ccclass, property} = cc._decorator;

@ccclass
export default class StateManage extends cc.Node {
    private static _instance:StateManage = null;

    static KEY_SKIN:string = "skin";                // 皮肤
    static KEY_SCORE:string = "score";              // 得分
    static KEY_JEWEL_STATE:string = "jewel";              // 新钻石

    private skin:object = null;
    private score:string = "0";
    public jewel:Number = 2;

    public static get instance():StateManage {
        if (!StateManage._instance) StateManage._instance = new StateManage();
        
        return StateManage._instance;
    }

    private _lastChangedKey:string;

    /**
     * 
     */
    public get lastChangedKey():string {
        return this._lastChangedKey;
    }

    
    // 修改状态
    public setData(key:string, value:any){

        if (this[key] !== value && this[key] != void 0) {
            this[key] = value;

            this._lastChangedKey = key;
            this.dispatchEvent(new cc.Event("change", false));
        }
    }
    // 获取状态
    public getData(key:string){
        if(this[key] != void 0){
            return this[key];
        }
        // cc.log(this.jewel)
    }
}
