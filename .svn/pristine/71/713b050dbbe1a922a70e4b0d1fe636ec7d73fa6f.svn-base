{"version":3,"sources":["../../../../../../assets/Script/gamecore/managers/assets/Script/gamecore/managers/UtilsManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/gamecore/managers","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\nimport {TweenLite} from \"../libs/TweenLite\";\n\n/**\n * 游戏功能管理。比如震动关闭、开启\n */\n@ccclass\nexport default class UtilsManager extends cc.EventTarget {\n\n    \n    /**\n     *\n     */\n    constructor() {\n        super();\n        \n        this._canVibrate = true;\n\n        //读取本地数据\n        let v:any = cc.sys.localStorage.getItem(\"__l__soundsManager_vibrateoff\");\n        if (v == \"true\") {\n            this.vibrateOff();\n        }\n\n    }\n\n\n    private _canVibrate:boolean;\n\n\n    /**\n     * 是否可以震动\n     */\n    get canVibrate():boolean {\n        return this._canVibrate;\n    }\n\n\n    /**\n     * 关闭震动\n     */\n    vibrateOff():void {\n        if (!this._canVibrate) return;\n\n        this._canVibrate = false;\n\n        cc.sys.localStorage.setItem(\"__l__soundsManager_vibrateoff\", true);\n    }\n\n\n    /**\n     * 开启震动\n     */\n    vibrateOn():void {\n        if (this._canVibrate) return;\n\n        this._canVibrate = true;\n        cc.sys.localStorage.removeItem(\"__l__soundsManager_vibrateoff\");\n    }\n\n\n\n\n    //============================================================================\n\n    //iphone x 顶部条高度\n    get iphoneXTopBarHeight():number {\n        return 44;\n    }\n\n    /**\n     * 检查是否是iphoneX\n     * \n     */\n    get isIphoneX():boolean {\n        try {\n            return /iphone/gi.test(navigator.userAgent) && (screen.height == 812 && screen.width == 375);\n        } catch (error) {\n            \n        }\n\n        return false;\n    }\n\n\n\n    //==============================================================\n    private _labelToTweenMap:object = {};\n\n    /**\n     * 将一个label的值增加到或减少到另外一个值。\n     * 比如是整数。\n     * \n     * @param label \n     * @param v \n     * @param duration          动画时间\n     */\n    labelStringToValue(label:cc.Label, v:number, duration:number = 0.5):void {\n        let uuid:string = label.uuid;\n\n        let tween:TweenLite = this._labelToTweenMap[uuid] as TweenLite;\n        if (tween) tween.kill();\n\n        let currentV:number = parseInt(label.string);\n        if (isNaN(currentV)) currentV = 0;\n\n        let step:number = (currentV > v) ? -1 : 1;\n        \n        let obj:object = {\"v\":currentV};\n        tween = TweenLite.to(\n                obj, \n                duration, \n                {\n                    \"v\":v,\n                    \"onUpdate\":function(obj:object):void {\n                        let v = Math.floor(obj[\"v\"]);\n                        label.string = \"\" + v;\n                    },\n                    \"onUpdateParams\":[obj]\n                }\n            );\n    }\n\n\n}\n"]}