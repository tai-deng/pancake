{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\commands/assets\\Script\\commands\\Over.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\commands","sourcesContent":["import GameManager from \"../gamecore/managers/GameManager\";\r\nimport StateManage from \"../StateManage/StateManage\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n/**\r\n * 展示游戏结果\r\n */\r\n@ccclass\r\nexport default class Over extends cc.Component {\r\n\r\n    private static _instance:Over = null;\r\n    public scene:cc.Node;\r\n    @property(cc.Node)\r\n    off:cc.Node = null;\r\n    @property(cc.Node)\r\n    reset:cc.Node = null;\r\n    @property(cc.Node)\r\n    share:cc.Node = null;\r\n\r\n    public static get instance():Over {\r\n        if (!Over._instance) Over._instance = new Over();\r\n        return Over._instance;\r\n    }\r\n\r\n    initialize(node:cc.Node):void{\r\n        this.scene = node;\r\n        this.off = node.getChildByName(\"off\");\r\n        this.reset = node.getChildByName(\"reset\");\r\n        this.share = node.getChildByName(\"share\");\r\n    }\r\n    /**\r\n     * show\r\n     */\r\n    show(){\r\n        cc.find(\"Canvas/over\").active = true;\r\n        cc.find(\"Canvas/over\").zIndex = 10;\r\n        cc.find(\"Canvas/PageTop\").zIndex = 11;\r\n        cc.find(\"Canvas/PageTop/grade\").active = true;\r\n        let score = StateManage.instance.getData(StateManage.KEY_SCORE);\r\n        cc.find(\"Canvas/over/content/currentScore/Label\").getComponent(cc.Label).string = score;\r\n        cc.find(\"Canvas/PageTop/grade/Label\").getComponent(cc.Label).string = score;\r\n    }\r\n    hidden(){\r\n        cc.find(\"Canvas/over\").active =false;\r\n        cc.find(\"Canvas/PageTop/grade\").active = false;\r\n        cc.log(\"执行~~~~1\")\r\n    }\r\n    // 使用复活卡\r\n    useReviveCar(){\r\n        cc.log(\"使用复活卡\")\r\n    }\r\n    // 看视频继续游戏\r\n    keepUpGema(){\r\n        cc.log(\"看视频继续游戏\")\r\n        this.hidden();\r\n    }\r\n    // 重新开始游戏\r\n    resetGame(){\r\n        // this.node.parent.removeChild(this.node,true);\r\n        this.hidden();\r\n        StateManage.instance.setData(StateManage.KEY_ISOVER,0);\r\n        cc.log(\"重新开始游戏\")\r\n    }\r\n    onLoad(){\r\n        // StateManage.instance.on(\"change\", this.stateChangeHandler, this);\r\n\r\n    }\r\n    // 数据值监控\r\n    private stateChangeHandler(e:cc.Event):void {\r\n        /* let key:string = StateManage.instance.lastChangedKey;\r\n        // 监控游戏是否结束 1 游戏结束展示页面 2 隐藏游戏结束页面\r\n        if (key == StateManage.KEY_ISOVER && StateManage.instance.isOver == 1) {\r\n        } */\r\n    }\r\n    onDestroy() {\r\n        // StateManage.instance.off(\"change\", this.stateChangeHandler);\r\n    }\r\n}\r\n"]}