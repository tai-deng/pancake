{"version":3,"sources":["StartSence.ts"],"names":[],"mappings":";;;;;AAAA,gEAA2D;AAErD,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;;GAEG;AAEH;IAAwC,8BAAY;IADpD;QAAA,qEA+EC;QA3EG,QAAQ;QAER,cAAQ,GAAW,IAAI,CAAC;QAExB,UAAU;QAEV,oBAAc,GAAW,IAAI,CAAC;;IAqElC,CAAC;IAnEG,2BAAM,GAAN;QACI,OAAO;QACP,qBAAW,CAAC,WAAW,GAAG,KAAK,CAAC;QAEhC,WAAW;QACX,qBAAW,CAAC,aAAa,CAAC,cAAc,GAAG,2BAA2B,CAAC;IAC3E,CAAC;IAED,0BAAK,GAAL;QACI,WAAW;QACX,qBAAW,CAAC,aAAa,CAAC,gBAAgB,CAAC,kCAAkC,CAAC,CAAC;QAE/E,MAAM;QACN,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,MAAM;QACN,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAC7E,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;IAE7F,CAAC;IAGD;;;;OAIG;IACK,uCAAkB,GAA1B,UAA2B,CAAU;QACjC,QAAQ;QACR,qBAAW,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;QAEzC,IAAI,qBAAW,CAAC,aAAa,CAAC,UAAU,EAAE;YACtC,qBAAW,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;SAC3C;aAAM;YACH,qBAAW,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;SACzC;QAED,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAGD;;;;OAIG;IACK,6CAAwB,GAAhC,UAAiC,CAAU;QACvC,QAAQ;QACR,qBAAW,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;QAEzC,QAAQ;QACR,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IACvC,CAAC;IAED;;OAEG;IACK,oCAAe,GAAvB;QACI,IAAI,QAAQ,GAAW,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEhE,aAAa;QACb,IAAI,qBAAW,CAAC,aAAa,CAAC,UAAU,EAAE;YACtC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;SACnD;aAAM;YACH,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;SACnD;IACL,CAAC;IAxED;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACM;IAIxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACY;IATb,UAAU;QAD9B,OAAO;OACa,UAAU,CA8E9B;IAAD,iBAAC;CA9ED,AA8EC,CA9EuC,EAAE,CAAC,SAAS,GA8EnD;kBA9EoB,UAAU","file":"","sourceRoot":"../../../../../assets/Script/startsence","sourcesContent":["import GameManager from \"../gamecore/managers/GameManager\";\n\nconst {ccclass, property} = cc._decorator;\n\n\n/**\n * 启动场景\n */\n@ccclass\nexport default class StartSence extends cc.Component {\n\n\n    //声音控制按钮\n    @property(cc.Node)\n    soundBtn:cc.Node = null;\n\n    //进入游戏场景按钮\n    @property(cc.Node)\n    toGameSenceBtn:cc.Node = null;\n\n    onLoad () {\n        //设置版本号\n        GameManager.gameVersion = \"1.0\";\n\n        //设置常用的音乐素材\n        GameManager.soundsManager.tapSoundSource = \"/resources/sounds/tap.mp3\";\n    }\n\n    start () {\n        //设置主场景背景音乐\n        GameManager.soundsManager.pushSenceBgSound(\"/resources/sounds/startsence.mp3\");\n        \n        //显示UI\n        this.refreshSoundBtn();\n\n        //事件监听\n        this.soundBtn.on(cc.Node.EventType.TOUCH_END, this.soundBtnTapHandler, this);\n        this.toGameSenceBtn.on(cc.Node.EventType.TOUCH_END, this.toGameSenceBtnTapHandler, this);\n\n    }\n\n\n    /**\n     * 声音控制按钮点击\n     * \n     * @param e \n     */\n    private soundBtnTapHandler(e:cc.Event):void {\n        //播放点击音效\n        GameManager.soundsManager.playTapSound();\n\n        if (GameManager.soundsManager.musicMuted) {\n            GameManager.soundsManager.unmuteMusic();\n        } else {\n            GameManager.soundsManager.muteMusic();\n        }\n\n        this.refreshSoundBtn();\n    }\n\n\n    /**\n     * 场景控制按钮点击\n     * \n     * @param e \n     */\n    private toGameSenceBtnTapHandler(e:cc.Event):void {\n        //播放点击音效\n        GameManager.soundsManager.playTapSound();\n\n        //进入游戏场景\n        cc.director.loadScene(\"GameSence\");\n    }\n\n    /**\n     * 刷新按钮显示\n     */\n    private refreshSoundBtn():void {\n        let btnLabel:cc.Node = this.soundBtn.getChildByName(\"btnLabel\");\n\n        //检查是否已关闭背景音乐\n        if (GameManager.soundsManager.musicMuted) {\n            btnLabel.getComponent(cc.Label).string = \"开启音乐\";\n        } else {\n            btnLabel.getComponent(cc.Label).string = \"关闭音乐\";\n        }\n    }\n}\n"]}