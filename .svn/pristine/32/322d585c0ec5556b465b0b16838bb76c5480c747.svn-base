(function() {"use strict";var __module = CC_EDITOR ? module : {exports:{}};var __filename = 'preview-scripts/assets/Script/Ranking.js';var __require = CC_EDITOR ? function (request) {return cc.require(request, require);} : function (request) {return cc.require(request, __filename);};function __define (exports, require, module) {"use strict";
cc._RF.push(module, '5ad1fxTMPpKCIiqGWB7+ED2', 'Ranking', __filename);
// Script/Ranking.ts

Object.defineProperty(exports, "__esModule", { value: true });
var RankCtrl_1 = require("./RankCtrl");
var _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;
var Ranking = /** @class */ (function (_super) {
    __extends(Ranking, _super);
    function Ranking() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.playersContainer = null;
        _this.scroll = null;
        _this.itemHeight = 112;
        return _this;
        // update (dt) {}
    }
    Object.defineProperty(Ranking.prototype, "data", {
        get: function () {
            return this._data;
        },
        set: function (v) {
            if (this._data != v) {
                this._data = v;
                this.init();
            }
        },
        enumerable: true,
        configurable: true
    });
    // onLoad () {}
    Ranking.prototype.start = function () {
        if (!this._isOnLoadCalled)
            return;
        console.log("总榜", this.data);
        RankCtrl_1.default.instance.on("getTotalRankEvent", this.getTotalRank, this);
        this.getTotalRank();
    };
    Ranking.prototype.getTotalRank = function () {
        this.data = RankCtrl_1.default.instance.getTotallRank();
        console.log(this.data, "ranking");
    };
    Ranking.prototype.init = function () {
        this.playersContainer.removeAllChildren();
        var goodNumber = this.data.length;
        this.playersContainer.height = (this.itemHeight + 20) * goodNumber + 20;
        cc.loader.loadRes("player", function (err, prefab) {
            for (var i = 0; i < this.data.length; ++i) {
                var item = cc.instantiate(prefab);
                item.getComponent("RankingItem").data = this.data[i];
                this.playersContainer.addChild(item);
                // cc.log(item.getComponent("RankingItem").data)
            }
        }.bind(this));
        this.scroll.getComponent(cc.ScrollView).scrollToTop(0.1);
    };
    __decorate([
        property(cc.Node) // 所有人的排名容器
    ], Ranking.prototype, "playersContainer", void 0);
    __decorate([
        property(cc.Node) // 滑块节点
    ], Ranking.prototype, "scroll", void 0);
    Ranking = __decorate([
        ccclass
    ], Ranking);
    return Ranking;
}(cc.Component));
exports.default = Ranking;

cc._RF.pop();
        }
        if (CC_EDITOR) {
            __define(__module.exports, __require, __module);
        }
        else {
            cc.registerModuleFunc(__filename, function () {
                __define(__module.exports, __require, __module);
            });
        }
        })();
        //# sourceMappingURL=Ranking.js.map
        