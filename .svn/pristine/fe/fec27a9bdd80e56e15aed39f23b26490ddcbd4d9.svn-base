{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\xiaoyaoji/assets\\Script\\gamecore\\xiaoyaoji\\XYJAPI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\xiaoyaoji","sourcesContent":["import GameManager from \"../managers/GameManager\";\r\nimport WXCore from \"../wechat/WXCore\";\r\nimport { md5 } from \"../libs/md5\";\r\nimport ShareTypes from \"./ShareTypes\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nif(typeof wx != \"undefined\"){\r\n    wx.onShow(function(res:object):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  wx.onShow  -\");\r\n        cc.info(res);\r\n\r\n        let query:any = res[\"query\"];\r\n         //分享者id\r\n         XYJAPI.inviterOpenID = query.openID;\r\n         //分享者id\r\n         XYJAPI.inviterUserID = query.userID;\r\n         //分享者昵称\r\n         XYJAPI.inviterNickname = decodeURIComponent(query.nickname)\r\n         \r\n         //分享的时间戳（秒）\r\n         XYJAPI.inviterTime = parseInt(query.time);\r\n         if (isNaN(XYJAPI.inviterTime)) XYJAPI.inviterTime = 0;\r\n\r\n         XYJAPI.gameStartTime = Math.floor(new Date().getTime()/1000);\r\n \r\n         //分享做什么\r\n         XYJAPI.inviterAction = query.action;\r\n         XYJAPI.inviterChannel = query.channel;\r\n    });\r\n}\r\n\r\n/**\r\n * 小幺鸡api\r\n * \r\n * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/UNX8Vu1aN?password=wx\r\n */\r\n@ccclass\r\nexport default class XYJAPI {\r\n\r\n    //基础URL\r\n    private static _baseURL:string;\r\n\r\n    //渠道id\r\n    static channelID:string = null;\r\n\r\n    //版本号\r\n    static gameVersion:string = null;\r\n\r\n    //==============================================================\r\n    //邀请者相关\r\n    //==============================================================\r\n    //邀请者open id\r\n    static inviterOpenID:string = null;\r\n\r\n    //邀请者id\r\n    static inviterUserID:string = null;\r\n    \r\n    \r\n    //邀请者昵称\r\n    static inviterNickname:string = null;\r\n    \r\n    //分享时间戳(秒)\r\n    static inviterTime:number = 0;\r\n    \r\n    //游戏开始时间\r\n    static gameStartTime:number = 0;\r\n    \r\n    //分享目标\r\n    static inviterAction:string = null;\r\n    \r\n    //推广来源\r\n    static inviterChannel:string = null;\r\n    //==============================================================\r\n\r\n    //接力限制时间（秒）。默认30秒，即用户分享30秒内可以被接力。\r\n    static relayLimitedTime:number = 30;\r\n\r\n    //用户open id\r\n    static userOpenID:string = null;\r\n    //用户id\r\n    static userID:string = null;\r\n    static userUnionID:string = null;\r\n\r\n    //用户昵称\r\n    static userNickname:string = null;\r\n\r\n    private static userToken:string = null;\r\n\r\n    private static encryptedData:string = null;\r\n\r\n    private static iv:string = null;\r\n\r\n    /**\r\n     * avatarUrl\tstring\t用户头像图片 url\t\r\n     * city\t        string\t用户所在城市\t\r\n     * country\t    string\t用户所在国家\t\r\n     * gender\t    number\t用户性别\t\r\n     * language\t    string\t显示 country province city 所用的语言\t\r\n     * nickName\t    string\t用户昵称\t\r\n     * openId\t    string\t用户 openId\t\r\n     * province\t    string\t用户所在省份\r\n     */\r\n    private static _userInfo:object = null;\r\n    public static get userInfo():object {return XYJAPI._userInfo;}\r\n\r\n    \r\n\r\n\r\n\r\n    //是否已初始化\r\n    static _initialized:boolean;\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    static init():void {\r\n        if (XYJAPI._initialized) return;\r\n        XYJAPI._initialized = true;\r\n\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  init   -\");\r\n\r\n        //检查是否是调试模式\r\n        if (GameManager.isDebug) {\r\n            XYJAPI._baseURL = \"https://tball.yz071.com/\";\r\n        } else {\r\n            XYJAPI._baseURL = \"https://ball.yz071.com/\";\r\n        }\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.login(\r\n            {\r\n                \"success\":XYJAPI.loginCallback,\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 检查是否是接力\r\n     * \r\n     * @param inTime        在游戏开始多少秒后可以接力\r\n     */\r\n    static checkCanRelay(inTime:number = 60):boolean {\r\n        if (!XYJAPI.userOpenID) {\r\n            cc.info(\"[接力]尚未登录\");\r\n            return false;\r\n        }\r\n\r\n        let query:any = WXCore.queryData;\r\n        if (!query) return false;\r\n\r\n        //分享者openid\r\n        XYJAPI.inviterOpenID = query.openID;\r\n        //分享者id\r\n        XYJAPI.inviterUserID = query.userID;\r\n        //分享者昵称\r\n        XYJAPI.inviterNickname = decodeURIComponent(query.nickname);\r\n        \r\n        //分享的时间戳（秒）\r\n        XYJAPI.inviterTime = parseInt(query.time);\r\n        if (isNaN(XYJAPI.inviterTime)) XYJAPI.inviterTime = 0;\r\n\r\n        //分享做什么\r\n        XYJAPI.inviterAction = query.action;\r\n        XYJAPI.inviterChannel = query.channel;\r\n\r\n        if (!GameManager.isDebug) {\r\n            if (XYJAPI.userOpenID == XYJAPI.inviterOpenID) {\r\n                cc.info(\"[接力]不能给自己接力\");\r\n                return false;\r\n            }\r\n        } else {\r\n            cc.info(\"[接力]调试模式下可以给自己接力\");\r\n        }\r\n\r\n        let nowS:number = Math.round(new Date().getTime() / 1000);\r\n        if ((nowS - XYJAPI.gameStartTime) > inTime) {\r\n            cc.info(\"[接力]游戏已开始\" + (nowS - XYJAPI.gameStartTime));\r\n            return false;\r\n        }\r\n\r\n        if (XYJAPI.inviterAction != \"relay\") return false;\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 用户的登陆回调\r\n     * \r\n     * \r\n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/MsJg6RxLg\r\n     * \r\n     * @param res \r\n     */\r\n    private static loginCallback(res:object):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  loginCallback   -\");\r\n        cc.info(res);\r\n\r\n        if (res) {\r\n            XYJAPI._code = res[\"code\"];\r\n            XYJAPI.login();\r\n        }\r\n    }\r\n\r\n    private static _code:string;\r\n\r\n    /**\r\n     * 登陆平台\r\n     */\r\n    public static login():void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  login   -\");\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        let theData:object = {\r\n            code : \"\" + XYJAPI._code,\r\n            opId : \"\" + XYJAPI.inviterOpenID,\r\n            channel : \"\" + XYJAPI.inviterChannel,\r\n        };\r\n\r\n        //如果是来自增加基础分的分享\r\n        if (XYJAPI.inviterAction == ShareTypes.ADD_BASE_SCORE) {\r\n            theData[\"shareStatus\"] = \"1\";\r\n        }\r\n\r\n        cc.info(\"the data is\", theData);\r\n\r\n        cc.info(\"request Ball.Api.Auth.WechatLogin\");\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Auth.WechatLogin\",\r\n\r\n            data : theData, \r\n\r\n            header : {\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            method : \"POST\",\r\n\r\n            success : XYJAPI.loginFeedbackCallback,\r\n\r\n            fail: function(res) {\r\n                cc.info(\"failed to call Ball.Api.Auth.WechatLogin\");\r\n                cc.info(res);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 向小幺鸡平台发送登陆反馈后回调\r\n     */\r\n    private static loginFeedbackCallback(res:object):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  loginFeedbackCallback   -\");\r\n        cc.info(res);\r\n\r\n        XYJAPI.userOpenID = res[\"data\"].data.openid;\r\n        XYJAPI.userID = res[\"data\"].data.userid;\r\n        XYJAPI.userToken = res[\"data\"].data.token;\r\n        cc.info(\"userOpenID=\" + XYJAPI.userOpenID);\r\n        cc.info(\"userToken=\" + XYJAPI.userToken);\r\n        cc.info(\"userID=\" + XYJAPI.userID);\r\n\r\n        XYJAPI.getUserInfo();\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 获取用户信息\r\n     */\r\n    static getUserInfo():void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getUserInfo   -\");\r\n\r\n        //检查是否存在该数据\r\n        if (XYJAPI._userInfo) return;\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.getUserInfo({\r\n            \"success\":XYJAPI.getUserInfoCallback\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取用户信息回调\r\n     * @param res\r\n     */\r\n    private static getUserInfoCallback(res:object):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getUserInfoCallback   -\");\r\n        cc.info(res);\r\n\r\n        XYJAPI.encryptedData = res[\"encryptedData\"];\r\n        XYJAPI.iv = res[\"iv\"];\r\n        XYJAPI._userInfo = res[\"userInfo\"];\r\n\r\n        cc.info(\"encryptedData=\" + XYJAPI.encryptedData);\r\n        cc.info(\"iv=\" + XYJAPI.iv);\r\n        cc.info(\"userInfo=\", XYJAPI._userInfo);\r\n\r\n        //登录绑定unionid\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Auth.Binding\",\r\n            data : {\r\n                encryptedData : XYJAPI.encryptedData,\r\n                iv : XYJAPI.iv,\r\n            },\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            method : \"POST\",\r\n\r\n            \"success\":XYJAPI.loginBindingCallback\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 登陆绑定\r\n     * \r\n     * @param res\r\n     */\r\n    private static loginBindingCallback(res:object):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  loginBindingCallback   -\");\r\n        cc.info(res);\r\n\r\n        XYJAPI.userUnionID = res[\"data\"].data.unionId;\r\n        cc.info(\"userUnionID=\" +  XYJAPI.userUnionID);\r\n\r\n        //绑定成功后，获取复活卡数目\r\n        XYJAPI.getRevive();\r\n        //获取是否可分享并获得复活卡\r\n        XYJAPI.getRemoteCanShare();\r\n        //获取公众号二维码图片信息\r\n        XYJAPI.getWXMiniAppData();\r\n        //获取分享的数据\r\n        XYJAPI.getShareData();\r\n    }\r\n\r\n\r\n    //远程设置值，是否可分享\r\n    private static _r_canShare:boolean;\r\n\r\n\r\n    /**\r\n     * 是否可以分享。\r\n     */\r\n    static get canShare():boolean {\r\n        return XYJAPI._r_canShare;\r\n    }\r\n\r\n\r\n    \r\n    /**\r\n     * 获取远程设置的是否可分享的值\r\n     */\r\n    private static getRemoteCanShare():void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getRemoteCanShare  -\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.AppSet\",\r\n\r\n            header : {\r\n\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n\r\n            },\r\n\r\n            method : \"GET\",\r\n\r\n            success : (res)=>{\r\n                cc.info(\"---- Ball.Api.Share.AppSet ----\")\r\n                cc.info(res);\r\n\r\n                if (res[\"data\"] && res[\"data\"].data) {\r\n                    XYJAPI._r_canShare = (res[\"data\"].data.status == 1);\r\n                    cc.info(\"分享是否已开启\" + XYJAPI._r_canShare);\r\n                }\r\n                    \r\n            },\r\n\r\n        });\r\n    }\r\n\r\n\r\n    private static _reviveCount:number = 0;\r\n\r\n    /**\r\n     * 获取复活卡数量\r\n     */\r\n    static get reviveCount():number {\r\n        return this._reviveCount;\r\n    }\r\n\r\n    /**\r\n     * 获取复活卡数量。回调方法接收一个number类型的参数。\r\n     */\r\n    static getRevive(callback:Function = null):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getRevive  -\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.GetRevive\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            method : \"GET\",\r\n\r\n            success : function(res):void {\r\n                cc.info(\"---- Ball.Api.Share.GetRevive ----\")\r\n                cc.info(res);\r\n\r\n                XYJAPI._reviveCount = res.data.data.revive;\r\n                cc.info(\"用户剩余的复活卡\" + XYJAPI._reviveCount);\r\n\r\n                if (callback != null) {\r\n                    callback.call(null, XYJAPI._reviveCount);\r\n                }\r\n            },\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 使用复活卡\r\n     * \r\n     * @param callback \r\n     */\r\n    static useRevive(callback:Function = null):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  userRevive  -\");\r\n\r\n        if (XYJAPI._reviveCount <= 0) {\r\n            cc.info(\"复活卡数量不足\");\r\n            return;\r\n        }\r\n\r\n\r\n        //减少一个复活卡\r\n        XYJAPI._reviveCount--;\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.SetRevive\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n\r\n            },\r\n\r\n            method : \"GET\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.SetRevive ----\")\r\n                cc.info(res);\r\n\r\n                let suc:boolean = (res && res[\"data\"] && res[\"data\"].code == 200);\r\n\r\n                if (callback != null) {\r\n                    callback.call(null, suc);\r\n                }\r\n            },\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 保存分数\r\n     * \r\n     * @param score \r\n     */\r\n    static saveScore(score:number):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  saveScore  -\");\r\n        cc.info(score);\r\n\r\n        if (!XYJAPI._userInfo)  {\r\n            cc.info(\"需要先登录才能调用该接口\")\r\n            return;\r\n        }\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        cc.info(\"-  data  -\");\r\n        cc.info({score : \"\" + score, headimg: XYJAPI._userInfo[\"avatarUrl\"],nickname : XYJAPI._userInfo[\"nickName\"],});\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.SaveScore\",\r\n\r\n            data : {\r\n                score : \"\" + score,\r\n                headimg: XYJAPI._userInfo[\"avatarUrl\"],\r\n                nickname : XYJAPI._userInfo[\"nickName\"],\r\n             },\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            method : \"POST\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.SaveScore ----\")\r\n                cc.info(res);\r\n            },\r\n        });\r\n    }\r\n\r\n\r\n    //从服务器获取的分享数据\r\n    private static _shareDataMap:object = {};\r\n    //{\"imageurl\":string, \"title\":string}\r\n    // private static _shareData:object;\r\n\r\n\r\n    /**\r\n     * 获取分享数据\r\n     * \r\n     * @param callback      接受一个object对象:\r\n     * \r\n     * {\"imageurl\":string, \"title\":string}\r\n     *  \r\n     */\r\n    static getShareData(callback:Function = null, status:number = 0):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getShareData  -\");\r\n        cc.info(\"status=\" + status);\r\n        \r\n        if (XYJAPI._shareDataMap[status]) {\r\n            if (callback != null) {\r\n                callback.call(null, XYJAPI._shareDataMap[status]);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.Get\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            data: {\r\n                \"status\":status\r\n            },\r\n\r\n            method : \"GET\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.Get ----\")\r\n                cc.info(res);\r\n\r\n                let data:object = res[\"data\"][\"data\"];\r\n                XYJAPI._shareDataMap[status] = data;\r\n                if (data) {\r\n                    if (callback != null) {\r\n                        callback.call(null, data);\r\n                    }\r\n\r\n                    if (status == 0) {\r\n                        WXCore.setOnShareAppMessage(\r\n                            data[\"title\"],\r\n                            data[\"imageurl\"],\r\n                            {\r\n                                \"openID\":XYJAPI.userOpenID, \r\n                                \"userID\":XYJAPI.userID, \r\n                                \"channel\":XYJAPI.inviterChannel,\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n            },\r\n\r\n            fail : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.Get FAIL ----\")\r\n                cc.info(res);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 广告数据\r\n     */\r\n    private static _adImageData:object;\r\n\r\n    /**\r\n     * 获取交叉推广图。接收一个obj参数。\r\n     * \r\n     * {\r\n     *      imageurl: XYJAPI._baseURL + \"Upload/image/2018-06-06/P_15282657218141544.jpg \", \r\n     *      title: \"篮球大作战\", \r\n     *      bili: \"4:3\"\r\n     * }\r\n     * \r\n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/Rif1Qd3cp\r\n     */\r\n    static getAdImageData(callback:Function, refreshAgain:boolean = false):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getAdImage   -\");\r\n\r\n        //如果不是强制刷新数据，使用老数据\r\n        if (!refreshAgain && XYJAPI._adImageData) {\r\n            if (callback != null) {\r\n                callback.call(null, XYJAPI._adImageData);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            \"url\":XYJAPI._baseURL + \"api/?do=Ball.Api.Share.Shunt\",\r\n            \"data\":{\r\n            },\r\n\r\n            \"header\" : {\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            \"method\":\"GET\",\r\n\r\n            \"success\":function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.Shunt ----\")\r\n                cc.info(res);\r\n\r\n                if (res && res[\"data\"]) {\r\n                    //这里返回了很多图片，需要去一个比例最接近的尺寸\r\n                    let images:Array<object> = res[\"data\"].data;\r\n                    if (!images || images.length == 0) return;\r\n\r\n                    let winSize:cc.Size = cc.director.getWinSize();\r\n                    let currentHWV:number = winSize.height / winSize.width;\r\n\r\n                    let minHWV:number = 100;\r\n                    let minHWVObj:object;\r\n\r\n                    for (let i:number = 0; i < images.length; i++) {\r\n                        //{imageurl: XYJAPI._baseURL + \"Upload/image/2018-06-06/P_15282657218141544.jpg \", title: \"篮球大作战\", bili: \"4:3\"}\r\n                        let imgObj:object = images[i];\r\n\r\n                        let hwv:Array<string> = String(imgObj[\"bili\"]).split(\":\");\r\n                        let v:number = Math.abs(Number(hwv[0]) / Number(hwv[1]) - currentHWV);\r\n                        cc.info(\"current hwv is \" + v);\r\n\r\n                        if (v < minHWV) {\r\n                            minHWV = v;\r\n                            minHWVObj = imgObj;\r\n                        }\r\n                    }\r\n\r\n                    if (minHWVObj) {\r\n                        XYJAPI._adImageData = minHWVObj;\r\n                        callback.call(null, XYJAPI._adImageData);\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    //从服务器获取的分享数据\r\n    //{\"imageurl\":string}\r\n    private static _wxMiniAppData:object;\r\n\r\n\r\n    /**\r\n     * 微信小程序数据\r\n     * \r\n     * {\"imageurl\":string}\r\n     */\r\n    static get wxMiniAppData():object {\r\n        if (XYJAPI._wxMiniAppData) {\r\n            return XYJAPI._wxMiniAppData;\r\n        }\r\n\r\n        XYJAPI.getWXMiniAppData();\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    //是否正在请求微信小程序数据\r\n    private static _isGettingWXMiniAppData:boolean;\r\n\r\n    /**\r\n     * 获取微信小程序数据\r\n     * \r\n     * \r\n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/VBHsTd2nE\r\n     * \r\n     * \r\n     *  \r\n     */\r\n    private static getWXMiniAppData():void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getWXMiniAppData  -\");\r\n        cc.info(\"is requesting is\" + XYJAPI._isGettingWXMiniAppData);\r\n\r\n        if (XYJAPI._isGettingWXMiniAppData) return;\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        //标记正在请求数据\r\n        XYJAPI._isGettingWXMiniAppData = true;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Erweima.GetMoney\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            method : \"GET\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.\bErweima.GetMoney ----\")\r\n                cc.info(res);\r\n\r\n                XYJAPI._wxMiniAppData = res[\"data\"][\"data\"];\r\n            },\r\n\r\n            complete : function():void {\r\n                XYJAPI._isGettingWXMiniAppData = false;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    //================================================================================================\r\n    //接力逻辑\r\n    //================================================================================================\r\n\r\n\r\n    /**\r\n     * 上报接力分数\r\n     * \r\n     * \r\n     * @param score             接力分数\r\n     * @param startTime         接力开始时间（玩家开始玩游戏时间），秒\r\n     * \r\n     * \r\n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/5DA71JiTP\r\n     */\r\n    static saveRelayScore(score:number, startTime:Date):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  saveRelayScore  -\");\r\n        cc.info(score, startTime);\r\n        \r\n        if (!XYJAPI._userInfo)  {\r\n            cc.info(\"需要先登录才能调用该接口\")\r\n            return;\r\n        }\r\n\r\n        let theData:object = {};\r\n        //分数\r\n        theData[\"score\"] = \"\" + score;\r\n        theData[\"headimg\"] = XYJAPI._userInfo[\"avatarUrl\"],\r\n        theData[\"nickname\"] = XYJAPI._userInfo[\"nickName\"],\r\n        // theData[\"hid\"] = XYJAPI.inviterOpenID;\r\n        theData[\"hid\"] = XYJAPI.inviterUserID;\r\n        theData[\"stamp\"] = XYJAPI.inviterTime;\r\n        theData[\"startTime\"] = \"\" + Math.floor(startTime.getTime()/1000);\r\n        theData[\"endTime\"] = \"\" + Math.round(new Date().getTime()/1000);\r\n\r\n        //输出信息\r\n        cc.info(\"the data is:\", theData);\r\n\r\n        let signValue:string = XYJAPI.createSign(theData);\r\n        cc.info(\"sign is:\" + signValue);\r\n        cc.info(\"url is:\" + XYJAPI._baseURL + \"api/?do=Ball.Api.Share.saveHelpScore\" + \"&sign=\" + signValue);\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.saveHelpScore\" + \"&sign=\" + signValue,\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            data : theData, \r\n\r\n            method : \"POST\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.saveHelpScore ----\")\r\n                cc.info(res);\r\n\r\n                //提示用户\r\n                WXCore.showToast(\"成功给\" + XYJAPI.inviterNickname + \"助力\");\r\n            },\r\n\r\n            complete : function():void {\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    //接力数据\r\n    private static _relayData:object;\r\n\r\n    //本次接力结束时间\r\n    // private static _relayEndDate:Date;\r\n\r\n\r\n    /**\r\n     * 接力数据\r\n     * \r\n     * \r\n     * @see Ball.Api.Room.Activity\r\n     */\r\n    static getRelayData(callback:Function = null):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getRelayData  -\");\r\n        \r\n        if (!XYJAPI._userInfo)  {\r\n            cc.info(\"需要先登录才能调用该接口\")\r\n            return;\r\n        }\r\n\r\n        //使用老数据\r\n        // if (XYJAPI._relayData && XYJAPI._relayEndDate) {\r\n        //     let now:Date = new Date();\r\n        //     if (XYJAPI._relayData > now) {\r\n        //         if (callback != null) callback.call(null, XYJAPI._relayData);\r\n        //     }\r\n        // }\r\n\r\n        let theData:object = {};\r\n\r\n        //输出信息\r\n        cc.info(\"the data is:\", theData);\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Room.Activity\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            data : theData, \r\n\r\n            method : \"POST\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Room.Activity ----\")\r\n                cc.info(res);\r\n\r\n                let data:object = res[\"data\"][\"data\"];\r\n                XYJAPI._relayData = data;\r\n\r\n                //结束时间\r\n                // if (data) {\r\n                //     let remaining:object = data[\"remaining\"];\r\n                //     if (remaining && remaining[\"end_time\"]) {\r\n                //         XYJAPI._relayEndDate = new Date(remaining[\"end_time\"] * 1000);\r\n                //     }\r\n                // }\r\n                \r\n                if (callback != null) callback.call(null, data);\r\n            },\r\n\r\n            fail:function(res:object):void {\r\n                WXCore.showToast(\"数据请求失败\");\r\n            },\r\n\r\n            complete : function():void {\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 获取分享邀请的好友个数（分渠道）\r\n     * \r\n     * @param 分享类型          1:增加基础分分享\r\n     * \r\n     * @see Ball.Api.Room.Activity\r\n     */\r\n    static getNewUserCountFromShare(shareStatus:string, callback:Function = null):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getNewUserCountFromShare  -\");\r\n        \r\n        if (!XYJAPI._userInfo)  {\r\n            cc.info(\"需要先登录才能调用该接口\")\r\n            return;\r\n        }\r\n\r\n        // if (XYJAPI._relayData && XYJAPI._relayEndDate) {\r\n        //     let now:Date = new Date();\r\n        //     if (XYJAPI._relayData > now) {\r\n        //         if (callback != null) callback.call(null, XYJAPI._relayData);\r\n        //     }\r\n        // }\r\n\r\n        let theData:object = {\"code\":shareStatus};\r\n\r\n        //输出信息\r\n        cc.info(\"the data is:\", theData);\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Share.GetShareStatus\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            data : theData, \r\n\r\n            method : \"POST\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Share.GetShareStatus ----\")\r\n                cc.info(res);\r\n\r\n                let data:object = res[\"data\"][\"data\"];\r\n                let count:number = data[\"count\"]\r\n                if (!isNaN(count) && count > 0) {\r\n                    if (callback) callback.call(null, count);\r\n                }\r\n            },\r\n\r\n            fail:function(res:object):void {\r\n                WXCore.showToast(\"数据请求失败\");\r\n            },\r\n\r\n            complete : function():void {\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 获取红包数据\r\n     * \r\n     * {\r\n     *      \"money\":红包金额,\r\n     *      \"state\":    1:可领取，2:已领取, 0:其他\r\n     *      \"message\":\r\n     * }\r\n     * \r\n     * \r\n     * @see Ball.Api.Forward.Envelopes\r\n     */\r\n    static getHongBaoData(callback:Function = null):void {\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  getHongBaoData  -\");\r\n        \r\n        if (!XYJAPI._userInfo)  {\r\n            cc.info(\"需要先登录才能调用该接口\")\r\n            return;\r\n        }\r\n\r\n        let theData:object = {};\r\n\r\n        //输出信息\r\n        cc.info(\"the data is:\", theData);\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        wx.request({\r\n            url : XYJAPI._baseURL + \"api/?do=Ball.Api.Forward.Envelopes\",\r\n\r\n            header : {\r\n                \"X-Token\": XYJAPI.userToken,\r\n                \"X-Version\": XYJAPI.gameVersion,\r\n                \"X-Source\": XYJAPI.channelID,\r\n            },\r\n\r\n            data : theData, \r\n\r\n            method : \"POST\",\r\n\r\n            success : function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Forward.Envelopes ----\")\r\n                cc.info(res);\r\n\r\n                let result:object = {};\r\n\r\n                let code:string = \"\" + res[\"data\"][\"code\"];\r\n                if (code == \"200\") {\r\n                    //可领取\r\n                    result[\"state\"] = 1;\r\n                } else if (code == \"405\") {\r\n                    //已领取\r\n                    result[\"state\"] = 2;\r\n                } else {\r\n                    result[\"state\"] = 0;\r\n                    result[\"message\"] = res[\"data\"][\"message\"];\r\n                }\r\n\r\n                let data:object = res[\"data\"][\"data\"];\r\n                if (data && data[\"money\"]) result[\"money\"] = data[\"money\"];\r\n                \r\n                cc.info(result);\r\n                if (callback != null) callback.call(null, result);\r\n            },\r\n\r\n            fail:function(res:object):void {\r\n                cc.info(\"---- Ball.Api.Forward.Envelopes ----\")\r\n                cc.info(res)\r\n                WXCore.showToast(\"数据请求失败\");\r\n            },\r\n\r\n            complete : function():void {\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    //================================================================================================\r\n    //通用方法\r\n    //================================================================================================\r\n\r\n    /**\r\n     * 创建签名\r\n     */\r\n    static createSign(data:object):string {\r\n        let keys:Array<string> = [];\r\n\r\n        for (let key in data) {\r\n            let v:any = data[key];\r\n            if (v == undefined || v == \"\") continue;\r\n            keys.push(\"\" + key);\r\n        }\r\n\r\n        keys.sort();\r\n\r\n        let sign:string = \"\";\r\n        for (let i:number = 0; i < keys.length; i++) {\r\n            let theKey:string = keys[i];\r\n\r\n            if (i > 0) sign += \"&\";\r\n            sign += \"\" + theKey + \"=\" + data[theKey];\r\n        }\r\n\r\n        //加上key（即渠道号）\r\n        sign += \"&key=\" + XYJAPI.channelID;\r\n\r\n        //计算md5\r\n        sign = md5(sign);\r\n\r\n        //大写\r\n        sign = sign.toUpperCase();\r\n        \r\n        return sign;\r\n    }\r\n}\r\n"]}