{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers/assets\\Script\\gamecore\\managers\\UtilsManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nimport {TweenLite} from \"../libs/TweenLite\";\r\n\r\n/**\r\n * 功能管理\r\n */\r\n@ccclass\r\nexport default class Utils {\r\n\r\n    \r\n\r\n\r\n    //============================================================================\r\n\r\n    //iphone x 顶部条高度\r\n    static get iphoneXTopBarHeight():number {\r\n        return 44;\r\n    }\r\n\r\n    /**\r\n     * 检查是否是iphoneX\r\n     * \r\n     */\r\n    static get isIphoneX():boolean {\r\n        try {\r\n            return /iphone/gi.test(navigator.userAgent) && (screen.height == 812 && screen.width == 375);\r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 将cocos中canvas的rect数据转换为屏幕中的rect数据\r\n     * \r\n     * @param rect \r\n     */\r\n    static toScreenRect(rect:cc.Rect):cc.Rect {\r\n        // cc.info(\"!!!!!!!!!!!!!!!!!!!!!!\");\r\n        let winSize:cc.Size = cc.director.getWinSize();\r\n        \r\n        let newRect:cc.Rect = rect.clone();\r\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height, newRect.xMin, newRect.yMax);\r\n        //转换为左上角作为(0, 0)点的坐标\r\n        newRect.x = rect.xMin;\r\n        newRect.y = winSize.height - newRect.yMax;\r\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\r\n        \r\n        //获取屏幕尺寸\r\n        let screenSize:cc.Size = cc.view.getFrameSize();\r\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");\r\n        // cc.info(screenSize.width, screenSize.height);\r\n        \r\n        //计算缩放比例\r\n        //TODO:NEXT，需要检查canvas的适配策略\r\n        let s:number = screenSize.height / winSize.height;\r\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\", s);\r\n        \r\n        \r\n        newRect.x *= s;\r\n        newRect.y *= s;\r\n        newRect.width *= s;\r\n        newRect.height *= s;\r\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\r\n\r\n        return newRect;\r\n    }\r\n\r\n\r\n    /**\r\n     * 将屏幕中的矩形区域，转换为cocos中canvas的矩形区域\r\n     * \r\n     * @param rect \r\n     */\r\n    static fromScreenRect(rect:cc.Rect):cc.Rect {\r\n        // cc.info(\"!!!!!!!!!!!!!!!!!!!!!!\");\r\n        // cc.info(\"fromScreenRect\");\r\n\r\n        let winSize:cc.Size = cc.director.getWinSize();\r\n        \r\n        let newRect:cc.Rect = rect.clone();\r\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\r\n        \r\n        //获取屏幕尺寸\r\n        let screenSize:cc.Size = cc.view.getFrameSize();\r\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");\r\n        // cc.info(screenSize.width, screenSize.height);\r\n        newRect.y = screenSize.height - newRect.y - newRect.height;\r\n        \r\n        //计算缩放比例\r\n        //TODO:NEXT，需要检查canvas的适配策略\r\n        let s:number = screenSize.height / winSize.height;\r\n        newRect.x /= s;\r\n        newRect.y /= s;\r\n        newRect.width /= s;\r\n        newRect.height /= s;\r\n        \r\n        let canvasRect:cc.Rect = new cc.Rect(newRect.x, newRect.y, newRect.width, newRect.height);\r\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\", s);\r\n        // cc.info(canvasRect.x, canvasRect.y, canvasRect.width, canvasRect.height)\r\n        return canvasRect;\r\n    }\r\n\r\n\r\n    /**\r\n     * 将cocos的资源路径转换为微信小游戏的资源路径。\r\n     * \r\n     * @param resourcePath \r\n     */\r\n    static toWechatMiniGameResourcePath(resourcePath:string):string {\r\n        if (resourcePath.charAt(0) == \"/\") resourcePath = resourcePath.substr(1);\r\n        return \"res/raw-assets/\" + resourcePath;\r\n    }\r\n\r\n\r\n    /**\r\n     * 将一个值转换为整型。如果失败，则返回0\r\n     * \r\n     * @param value\r\n     */\r\n    static toInt(value:any):number {\r\n        let v:number = parseInt(\"\" + value);\r\n        if (isNaN(v)) v = 0;\r\n        return v;\r\n    }\r\n\r\n\r\n    //==============================================================\r\n    private static _labelToValueMap:object = {};\r\n\r\n    /**\r\n     * 将一个label的值增加到或减少到另外一个值。\r\n     * 比如是整数。\r\n     * \r\n     * @param label \r\n     * @param v \r\n     * @param duration          动画时间\r\n     */\r\n    static labelStringToValue(label:cc.Label, v:number, duration:number = 0.5):void {\r\n        if (isNaN(v)) return;\r\n        \r\n        let currentV:number = parseInt(label.string);\r\n        if (isNaN(currentV) || currentV < 0) currentV = 0;\r\n        if (currentV == v) return;\r\n\r\n        let uuid:string = label.uuid;\r\n        clearInterval(this._labelToValueMap[uuid]);\r\n\r\n        let stepV:number = (v - currentV) / 10;\r\n        let step:number = 0;\r\n\r\n        this._labelToValueMap[uuid] = setInterval(function():void {\r\n            step++;\r\n            if (step == 10) {\r\n                label.string = \"\" + v;\r\n                // cc.info(\"label to value\", v, label.string);\r\n                \r\n                clearInterval(Utils._labelToValueMap[uuid]);\r\n            } else {\r\n                label.string = \"\" + (currentV + Math.floor(stepV * step));\r\n                // cc.info(v, label.string);\r\n            }\r\n\r\n        }, 50);\r\n    }\r\n\r\n\r\n}\r\n"]}