{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\gameScene/assets\\Script\\gameScene\\LevelInfoMain.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\gameScene","sourcesContent":["import StateManage from \"../StateManage/StateManage\";\r\nimport GameManager from \"../gamecore/managers/GameManager\";\r\nimport GameEventNames from \"../GameEventNames\";\r\nimport LevelData from \"./LevelData\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**\r\n * 游戏等级信息\r\n */\r\n@ccclass\r\nexport default class LevelInfoMain extends cc.Component {\r\n\r\n    //进度条\r\n    @property(cc.Sprite)\r\n    progressSprite:cc.Sprite = null;\r\n\r\n    //等级名称\r\n    @property(cc.Label)\r\n    levelName:cc.Label = null;\r\n\r\n    //等级详情\r\n    @property(cc.Label)\r\n    levelDetail:cc.Label = null;\r\n\r\n    //红点提示节点\r\n    @property(cc.Node)\r\n    redPointNode:cc.Node = null;\r\n\r\n    //升级小特效\r\n    @property(cc.Animation)\r\n    levelUpAni:cc.Animation = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        cc.info(\"【LevelInfoMain start】\");\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.tapHandler, this);\r\n    }\r\n\r\n\r\n\r\n    private tapHandler(e:cc.Event):void {\r\n        //音效\r\n        GameManager.soundsManager.playTapSound();\r\n\r\n        //不再提示红点\r\n        this.redPointNode.active = false;\r\n        \r\n        GameManager.eventManager.dispatchEventWith(GameEventNames.SHOW_LEVEL_DETAIL, this._levelData);\r\n    }\r\n\r\n\r\n    private _score:number = 0;\r\n\r\n    /**\r\n     * 设置分数\r\n     */\r\n    public set score(value:number) {\r\n        if (this._score == value) return;\r\n        this._score = value;\r\n\r\n        this.refreshUI();\r\n    }\r\n\r\n    private _levelData:LevelData;\r\n\r\n    /**\r\n     * 设置等级信息\r\n     */\r\n    public set levelData(value:LevelData) {\r\n        if (!value) return;\r\n        this._levelData = value;\r\n\r\n        this.refreshUI();\r\n        this.redPointNode.active = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * 刷新UI\r\n     */\r\n    private refreshUI():void {\r\n        if (!this._levelData) {\r\n            return;\r\n        }\r\n\r\n        cc.info(JSON.stringify(this._levelData));\r\n\r\n        this.levelName.string = \"等级 \" + this._levelData.level;\r\n        \r\n        this.levelDetail.string = this._levelData.desc;\r\n        \r\n        //显示进度\r\n        this.progressSprite.fillRange = (this._score - this._levelData.minScore) / (this._levelData.maxScore - this._levelData.minScore);\r\n    }\r\n\r\n\r\n\r\n    // update (dt) {}\r\n\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n}\r\n"]}