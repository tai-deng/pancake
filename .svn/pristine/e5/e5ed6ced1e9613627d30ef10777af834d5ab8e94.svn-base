{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\components/assets\\Script\\gamecore\\components\\Comp_EffectFloat.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;;GAEG;AAGH;IAA8C,oCAAY;IAD1D;QAAA,qEA2EC;QApEG,cAAQ,GAAU,GAAG,CAAC;QAKtB,WAAK,GAAU,CAAC,CAAC;QAKjB,eAAS,GAAU,EAAE,CAAC;QAKtB,eAAS,GAAU,CAAC,CAAC;;IAqDzB,CAAC;IA5CG,gCAAK,GAAL;QACI,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAEM,+BAAI,GAAX;QACI,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO;QAE5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CACjC,EAAE,CAAC,QAAQ,CACP,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAC1G,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAC1E,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,CACjD,CACJ,CAAC;IACN,CAAC;IAGO,iDAAsB,GAA9B;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;IACvC,CAAC;IAGD;;OAEG;IACI,+BAAI,GAAX;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3B,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SAC1B;IACL,CAAC;IAED,iBAAiB;IAGjB,oCAAS,GAAT;QACI,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAnED;QAHC,QAAQ,CAAC;YACN,WAAW,EAAC,WAAW;SAC1B,CAAC;sDACoB;IAKtB;QAHC,QAAQ,CAAC;YACN,WAAW,EAAC,WAAW;SAC1B,CAAC;mDACe;IAKjB;QAHC,QAAQ,CAAC;YACN,WAAW,EAAC,SAAS;SACxB,CAAC;uDACoB;IAKtB;QAHC,QAAQ,CAAC;YACN,WAAW,EAAC,SAAS;SACxB,CAAC;uDACmB;IArBJ,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CA0EpC;IAAD,uBAAC;CA1ED,AA0EC,CA1E6C,EAAE,CAAC,SAAS,GA0EzD;kBA1EoB,gBAAgB","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\components","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\n/**\r\n * 循环浮动效果\r\n */\r\n\r\n@ccclass\r\nexport default class Comp_EffectFloat extends cc.Component {\r\n\r\n    \r\n    @property({\r\n        displayName:\"浮动特效时长(秒)\"\r\n    })\r\n    duration:number = 1.5;\r\n\r\n    @property({\r\n        displayName:\"浮动间隔时长(秒)\"\r\n    })\r\n    delay:number = 2;\r\n\r\n    @property({\r\n        displayName:\"浮动距离(y)\"\r\n    })\r\n    distanceY:number = 20;\r\n\r\n    @property({\r\n        displayName:\"浮动距离(x)\"\r\n    })\r\n    distanceX:number = 0;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n\r\n    private _theAction:cc.Action;\r\n\r\n    start () {\r\n        this.play();\r\n    }\r\n\r\n    public play():void {\r\n        if (this._theAction) return;\r\n\r\n        this.unschedule(this.play);\r\n        this._theAction = this.node.runAction(\r\n            cc.sequence(\r\n                cc.moveTo(this.duration, this.node.x + this.distanceX, this.node.y + this.distanceY).easing(cc.easeOut(1)),\r\n                cc.moveTo(this.duration, this.node.x, this.node.y).easing(cc.easeBackIn()),\r\n                cc.callFunc(this.effectCompleteCallback, this)\r\n            )   \r\n        );\r\n    }\r\n\r\n\r\n    private effectCompleteCallback():void {\r\n        this._theAction = null;\r\n\r\n        let delay:number = this.delay * Math.random() / 2 + this.delay / 2;\r\n        this.schedule(this.play, delay, 1);\r\n    }\r\n\r\n\r\n    /**\r\n     * 暂停效果\r\n     */\r\n    public stop():void {\r\n        this.unschedule(this.play);\r\n\r\n        if (this._theAction) {\r\n            this.node.stopAction(this._theAction);\r\n            this._theAction = null;\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n\r\n    onDestroy() {\r\n        this.stop();\r\n    }\r\n}\r\n"]}