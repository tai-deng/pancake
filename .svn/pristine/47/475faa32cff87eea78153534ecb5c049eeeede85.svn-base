{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\index/assets\\Script\\index\\index.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\index","sourcesContent":["import GameManager from \"../gamecore/managers/GameManager\";\r\nimport GameEventNames from \"../GameEventNames\";\r\nimport AlertCommand from \"../commands/AlertCommand\";\r\nimport StateManage from \"../StateManage/StateManage\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class index extends cc.Component {\r\n    @property(cc.Node)\r\n    starBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    luckyMoneyBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    rankingBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    resurgenceBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    shoppingBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    soundBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    taskBar:cc.Node = null;\r\n\r\n    // onLoad () {}\r\n    private _tasks:Array<object>=[];\r\n\r\n    start () {\r\n        StateManage.instance.on(\"change\",this.stateChangeHandler,this);\r\n        this.starBar.on(cc.Node.EventType.TOUCH_END,this.startGame,this);\r\n        this.luckyMoneyBar.on(cc.Node.EventType.TOUCH_END,this.luckyMoney,this);\r\n        this.rankingBar.on(cc.Node.EventType.TOUCH_END,this.ranking,this);\r\n        this.resurgenceBar.on(cc.Node.EventType.TOUCH_END,this.resurgence,this);\r\n        this.shoppingBar.on(cc.Node.EventType.TOUCH_END,this.shopping,this);\r\n        this.soundBar.on(cc.Node.EventType.TOUCH_END,this.sound,this);\r\n        this.taskBar.on(cc.Node.EventType.TOUCH_END,this.task,this);\r\n\r\n        this.initSystem();\r\n\r\n        this.init();\r\n    }\r\n\r\n    private static _systemInitialized:boolean;\r\n    private initSystem():void {\r\n        if (index._systemInitialized) return;\r\n        index._systemInitialized = true;\r\n\r\n        // 綁定弹窗事件到命令\r\n        GameManager.context.mapEvent(GameEventNames.SHOW_ALERT, AlertCommand);\r\n        // 商店商品点击事件\r\n        //    GameManager\r\n    }\r\n    \r\n    private init(){\r\n        if(!this._isOnLoadCalled)return;\r\n\r\n        for(let i = 0;i<3;i++){\r\n            let data = StateManage.instance.getData(\"task\"+i);\r\n            this._tasks.push(data);\r\n        }\r\n        this.refreshTaskState();\r\n    }\r\n    // 获取任务状态\r\n    private refreshTaskState():void {\r\n        let motion = 0;\r\n\r\n        for(let i =0;i<this._tasks.length;i++){\r\n            let data = this._tasks;\r\n\r\n            let currentMotion:number = 0;\r\n\r\n            // 是否领取领取\r\n            let isgaina = StateManage.instance.getData(\"isgaina\"+i);\r\n            let planValue = StateManage.instance.getData(data[i][\"value\"]);\r\n            cc.info(\"refresh\", i, planValue, data[i][\"goal\"]);\r\n            cc.info(\"isgaina=\", isgaina)\r\n\r\n            if (isgaina == 2) continue;\r\n\r\n            if(planValue >= data[i][\"goal\"]){\r\n                currentMotion = 3;\r\n            } else {\r\n                currentMotion = 2;\r\n            }\r\n            cc.log(currentMotion);\r\n            if (currentMotion > motion) motion = currentMotion;\r\n        }\r\n        \r\n        let litterNode:cc.Node = cc.find(\"Canvas/controlRight/task/marvel\");\r\n        this.buMotion(litterNode, motion);\r\n    }\r\n    // 气泡动作\r\n    private buMotion(node:cc.Node,num:number){\r\n        if(num == 3){\r\n            let seq = cc.repeatForever(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.8,1.1,1.1),\r\n                    cc.scaleTo(0.4,0.9,0.9)\r\n            ));\r\n            node.runAction(seq);\r\n            node.active = true;\r\n        }else if(num == 2){\r\n            node.active = true;\r\n        }else if(num == 1){\r\n            node.active = false;\r\n        }\r\n    }\r\n    // 开始\r\n    startGame(e:cc.Event):void{\r\n        cc.director.loadScene(\"game\");\r\n    }\r\n    // 红包\r\n    luckyMoney(e:cc.Event):void{\r\n        cc.director.loadScene(\"luckyMoney\");\r\n    }\r\n    // 排行\r\n    ranking(e:cc.Event):void{\r\n        cc.director.loadScene(\"ranking\");\r\n    }\r\n    // 复活\r\n    resurgence(e:cc.Event):void{\r\n        cc.director.loadScene(\"resurgence\");\r\n    }\r\n    // 商店\r\n    shopping(e:cc.Event):void{\r\n        cc.director.loadScene(\"shopping\");\r\n    }\r\n    // 音效\r\n    sound(e:cc.Event):void{\r\n        cc.director.loadScene(\"sound\");\r\n    }\r\n    // 任务\r\n    task(e:cc.Event):void{\r\n        cc.director.loadScene(\"task\");\r\n    }\r\n    // update (dt) {}\r\n\r\n    private stateChangeHandler(e:cc.Event):void {\r\n        cc.info(StateManage.instance.lastChangedKey, StateManage.instance.getData(StateManage.instance.lastChangedKey));\r\n        cc.info(\"!!!!!!!!!!!!!!!!!!!!!!!!!!!!\");\r\n\r\n        let key:string = StateManage.instance.lastChangedKey;\r\n        for(let i =0;i<this._tasks.length;i++){\r\n            if(key == this._tasks[i][\"value\"]){\r\n                this.refreshTaskState();\r\n                break;\r\n            }\r\n        }\r\n        \r\n\r\n        \r\n    }\r\n\r\n\r\n    onDestroy() {\r\n        cc.info(\"@@@@@@@@@@@@@@@@@@@@ index destroied\"); \r\n    }\r\n    // 宝石 +10\r\n    public gem(){\r\n        let gem = StateManage.instance.getData(StateManage.KEY_TAGEM) + 10;\r\n        StateManage.instance.setData(StateManage.KEY_GEM,gem)\r\n        StateManage.instance.setData(StateManage.KEY_TAGEM,gem)\r\n    }\r\n    // 翻转次数 + 5\r\n    public overturn(){\r\n        let overturn = StateManage.instance.getData(StateManage.KEY_OVERTURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_OVERTURN,overturn)\r\n    }\r\n    // 一周转体次数 + 5\r\n    public turn(){\r\n        let turn = StateManage.instance.getData(StateManage.KEY_TURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_TURN,turn)\r\n    }\r\n    // 十秒内翻转次数 + 5\r\n    public tmturn(){\r\n        let tmturn = StateManage.instance.getData(StateManage.KEY_TMTURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_TMTURN,tmturn)\r\n    }\r\n    // 等级 + 1\r\n    public grade(){\r\n        let grade = StateManage.instance.getData(StateManage.KEY_TAGRADE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_GRADE,grade)\r\n        StateManage.instance.setData(StateManage.KEY_TAGRADE,grade)\r\n    }\r\n    // 累计使用复活卡次数 + 1\r\n    public resurgenceCar(){\r\n        let resurgenceCar = StateManage.instance.getData(StateManage.KEY_RESURGENCECAR) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RESURGENCECAR,resurgenceCar)\r\n    }\r\n    // 好友接力次数 + 1\r\n    public fdrelay(){\r\n        let fdrelay = StateManage.instance.getData(StateManage.KEY_FDRELAY) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_FDRELAY,fdrelay)\r\n    }\r\n    // 疯狂点击中点次数 + 10\r\n    public crazyTap(){\r\n        let crazyTap = StateManage.instance.getData(StateManage.KEY_CRAZYTAP) + 10;\r\n        StateManage.instance.setData(StateManage.KEY_CRAZYTAP,crazyTap)\r\n    }\r\n    // 累计任意分享 + 1\r\n    public anyShare(){\r\n        let anyShare = StateManage.instance.getData(StateManage.KEY_ANYSHARE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_ANYSHARE,anyShare)\r\n    }\r\n    // 煎烤好友并分享 + 1\r\n    public ripeShare(){\r\n        let ripeShare = StateManage.instance.getData(StateManage.KEY_RIPESHARE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RIPESHARE,ripeShare)\r\n    }\r\n    // A栏剩余任务次数 + 1\r\n    public tasknuma(){\r\n        let tasknuma = StateManage.instance.getData(StateManage.KEY_TASKNUM0) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_TASKNUM0,tasknuma)\r\n    }\r\n    // B栏剩余任务次数 + 1\r\n    public tasknumb(){\r\n        let tasknumb = StateManage.instance.getData(StateManage.KEY_TASKNUM1) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_TASKNUM1,tasknumb)\r\n    }\r\n    // C栏剩余任务次数 + 1\r\n    public tasknumc(){\r\n        let tasknumc = StateManage.instance.getData(StateManage.KEY_TASKNUM2) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_TASKNUM2,tasknumc)\r\n    }\r\n    // 第二天 + 1\r\n    public nextDay(){\r\n        // let nextDay = StateManage.instance.getData(StateManage.KEY_NEXTDAY) + 86400000;\r\n        // StateManage.instance.setData(StateManage.KEY_NEXTDAY,nextDay)\r\n\r\n        let toDay = StateManage.instance.getData(StateManage.KEY_TODAY) + 86400000;\r\n        StateManage.instance.setData(StateManage.KEY_TODAY,toDay)\r\n    }\r\n}\r\n"]}