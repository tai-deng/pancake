"use strict";
cc._RF.push(module, '09ea4coRp1GM7eGVuwZVIuC', 'Small');
// Script/Small.ts

Object.defineProperty(exports, "__esModule", { value: true });
var RankCtrl_1 = require("./RankCtrl");
var WXCore_1 = require("./WXCore");
var _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;
var Small = /** @class */ (function (_super) {
    __extends(Small, _super);
    function Small() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.moreBtn = null;
        _this.content = null;
        _this.shareBtn = null;
        _this.againBtn = null;
        return _this;
        // update (dt) {}
    }
    Object.defineProperty(Small.prototype, "data", {
        get: function () {
            return this._data;
        },
        set: function (v) {
            if (this._data != v) {
                this._data = v;
                this.refreshUI();
            }
        },
        enumerable: true,
        configurable: true
    });
    // onLoad () {}
    Small.prototype.start = function () {
        if (!this._isOnLoadCalled)
            return;
        this.moreBtn.on(cc.Node.EventType.TOUCH_END, this.more, this.node);
        // this.shareBtn.on(cc.Node.EventType.TOUCH_END,this.share,this.node);
        this.againBtn.on(cc.Node.EventType.TOUCH_END, this.again, this.node);
        RankCtrl_1.default.instance.on("getsmallRank", this.getsmallRank, this);
        this.getsmallRank();
    };
    Small.prototype.getsmallRank = function () {
        this.data = RankCtrl_1.default.instance.getSmallRank();
        console.log("small", this.data);
    };
    Small.prototype.refreshUI = function () {
        var data = this.data;
        console.log(cc.director.getScene);
        this.content.removeAllChildren();
        cc.loader.loadRes("small", function (err, prefab) {
            for (var i = 0; i < data.length; ++i) {
                var item = cc.instantiate(prefab);
                item.getComponent("SmallItem").data = data[i];
                this.content.addChild(item);
            }
        }.bind(this));
    };
    // 查看更多
    Small.prototype.more = function (ev) {
        cc.director.loadScene("wholeRank");
        // cc.audioEngine.play(cc.url.raw("sounds/tap"), false, 1);
        // cc.audioEngine.play(cc.url.raw(sourceURL), false, 1);
        console.log("查看更多排名", ev);
    };
    // 分享
    Small.prototype.share = function (ev) {
        console.log("分享", ev);
        WXCore_1.default.setOnShareAppMessage("游戏分享", canvas.toTempFilePathSync({
            destWidth: 500,
            destHeight: 400
        }));
    };
    // 再来一局
    Small.prototype.again = function (ev) {
        console.log("again");
    };
    __decorate([
        property(cc.Node)
    ], Small.prototype, "moreBtn", void 0);
    __decorate([
        property(cc.Node)
    ], Small.prototype, "content", void 0);
    __decorate([
        property(cc.Node)
    ], Small.prototype, "shareBtn", void 0);
    __decorate([
        property(cc.Node)
    ], Small.prototype, "againBtn", void 0);
    Small = __decorate([
        ccclass
    ], Small);
    return Small;
}(cc.Component));
exports.default = Small;

cc._RF.pop();