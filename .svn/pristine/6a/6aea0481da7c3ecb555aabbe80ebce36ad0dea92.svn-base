{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers/assets\\Script\\gamecore\\managers\\GameManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\nimport SoundsManager from \"./SoundsManager\";\r\nimport PopUpManager from \"./PopUpManager\";\r\nimport EventManager from \"./EventManager\";\r\nimport Context from \"../legs/Context\";\r\nimport LocationValues from \"../LocationValues\";\r\nimport DataManager from \"./DataManager\";\r\nimport ItemManager from \"./item/ItemManager\";\r\nimport Utils from \"./Utils\";\r\nimport SceneManager from \"../scene/SceneManager\";\r\n\r\n@ccclass\r\nexport default class GameManager {\r\n\r\n    //版本号\r\n    static gameVersion:string = \"1.0\";\r\n\r\n    //内部版本号\r\n    static gameInternalVersionCode:string;\r\n\r\n    //是否是测试\r\n    static isDebug:boolean = false;\r\n\r\n    //总事件控制器\r\n    private static _eventManager:EventManager = new EventManager();\r\n    public static get eventManager():EventManager {return GameManager._eventManager};\r\n\r\n    //场景管理器\r\n    private static _sceneManager:SceneManager = new SceneManager();\r\n    public static get sceneManager():SceneManager {return GameManager._sceneManager};\r\n\r\n    //全局数据管理器\r\n    private static _dataManager:DataManager = new DataManager();\r\n    public static get dataManager():DataManager {return GameManager._dataManager};\r\n    \r\n    //声音管理器\r\n    private static _soundsManager:SoundsManager = new SoundsManager();\r\n    public static get soundsManager():SoundsManager {return GameManager._soundsManager};\r\n\r\n    //popup管理器\r\n    private static _popUpManager:PopUpManager = new PopUpManager();\r\n    public static get popUpManager():PopUpManager {return GameManager._popUpManager};\r\n\r\n    //道具管理器\r\n    private static _itemManager:ItemManager = new ItemManager();\r\n    public static get itemManager():ItemManager {return GameManager._itemManager};\r\n\r\n    //legs框架上下文\r\n    private static _context:Context = new Context();\r\n    public static get context():Context {return GameManager._context};\r\n\r\n\r\n    //是否已初始化\r\n    private static _initialized:boolean;\r\n\r\n    private static init():void {\r\n        if (GameManager._initialized) return;\r\n        GameManager._initialized = true;\r\n\r\n        GameManager._canVibrate = true;\r\n\r\n        //读取本地数据\r\n        let v:any = cc.sys.localStorage.getItem(\"__l__gameManager_vibrateoff\");\r\n        if (v == \"true\") {\r\n            GameManager.vibrateOff();\r\n        }\r\n    }\r\n    \r\n\r\n    private static _temp:any = GameManager.init();\r\n\r\n\r\n    //是否可震动\r\n    private static _canVibrate:boolean;\r\n\r\n    /**\r\n     * 获取是否可震动\r\n     */\r\n    static get canVibrate():boolean {\r\n        return GameManager._canVibrate;\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭震动\r\n     */\r\n    static vibrateOff():void {\r\n        if (!GameManager._canVibrate) return;\r\n\r\n        GameManager._canVibrate = false;\r\n        cc.sys.localStorage.setItem(\"__l__gameManager_vibrateoff\", true);\r\n    }\r\n\r\n\r\n    /**\r\n     * 开启震动\r\n     */\r\n    static vibrateOn():void {\r\n        if (GameManager._canVibrate) return;\r\n\r\n        GameManager._canVibrate = true;\r\n        cc.sys.localStorage.removeItem(\"__l__gameManager_vibrateoff\");\r\n    }\r\n\r\n\r\n    /**\r\n     * 锁定场景不接受任何输入\r\n     */\r\n    static lockSence():void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 是否解除所有锁定\r\n     * \r\n     * @param unlockAll \r\n     */\r\n    static unlockSence(unlockAll:boolean):void {\r\n\r\n    }\r\n\r\n\r\n    private static _todayValue:string;\r\n\r\n    /**\r\n     * 获取今日日期值。比如2018-07-07\r\n     */\r\n    public static get todayValue():string {\r\n        if (!GameManager._todayValue) {\r\n            let date:Date = new Date();\r\n            GameManager._todayValue = \"\" + date.getFullYear();\r\n\r\n            GameManager._todayValue += \"-\";\r\n            let v:number = date.getMonth() + 1;\r\n            GameManager._todayValue += (v < 10) ? (\"0\" + v) : v;\r\n\r\n            GameManager._todayValue += \"-\";\r\n            v = date.getDate();\r\n            GameManager._todayValue += (v < 10) ? (\"0\" + v) : v;\r\n\r\n        }\r\n\r\n        return GameManager._todayValue;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加版本信息\r\n     * \r\n     */\r\n    public static addVersionInfo():void {\r\n        \r\n        cc.info(\"----  gamecore ----\");\r\n        cc.info(\"-  addVersionInfo   -\");\r\n\r\n        // if (this._versionInfo) return;\r\n        let n:cc.Node = new cc.Node();\r\n        let label:cc.Label = n.addComponent(cc.Label);\r\n        label.fontSize = 20;\r\n        label.lineHeight = 24;\r\n\r\n        let vStr:string = GameManager.gameVersion;\r\n        if (GameManager.gameInternalVersionCode) {\r\n            vStr += \".\" + GameManager.gameInternalVersionCode;\r\n        }\r\n        \r\n        if (GameManager.isDebug) vStr += \"【测试】\"\r\n\r\n        label.string = vStr;\r\n\r\n        let winSize:cc.Size = cc.director.getWinSize();\r\n\r\n        n.anchorX = 0;\r\n\r\n        if (Utils.isIphoneX) {\r\n            n.x = 20;\r\n            n.y = winSize.height - 10;\r\n        } else {\r\n            n.x = 0;\r\n            n.y = winSize.height - 10;\r\n        }\r\n        \r\n        cc.director.getScene().addChild(n);\r\n    }\r\n    \r\n}\r\n"]}