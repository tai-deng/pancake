{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\wechat/assets\\Script\\gamecore\\wechat\\WXCore.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\wechat","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\nif(typeof wx != \"undefined\"){\r\n    wx.onShow(function(res:object):void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  onShow  -\");\r\n        cc.info(res);\r\n\r\n        WXCore.query = res[\"query\"];\r\n    });\r\n}\r\n\r\n/**\r\n * 微信核心接口库\r\n */\r\n@ccclass\r\nexport default class WXCore {\r\n    //启动时携带的参数对象\r\n    static query:object;\r\n\r\n\r\n    private static _systemInfo:object;\r\n\r\n    /**\r\n     * 系统信息\r\n     * \r\n     * brand\t    string\t    手机品牌\t1.5.0\r\n     * model\t    string\t    手机型号\t\r\n     * pixelRatio\tnumber\t    设备像素比\t\r\n     * screenWidth\tnumber\t    屏幕宽度\t1.1.0\r\n     * screenHeight\tnumber\t    屏幕高度\t1.1.0\r\n     * windowWidth\tnumber\t    可使用窗口宽度\t\r\n     * windowHeight\tnumber\t    可使用窗口高度\t\r\n     * language\t    string\t    微信设置的语言\t\r\n     * version\t    string\t    微信版本号\t\r\n     * system\t    string\t    操作系统版本\t\r\n     * platform\t    string\t    客户端平台\t\r\n     * fontSizeSetting\tnumber\t用户字体大小设置。以“我-设置-通用-字体大小”中的设置为准，单位 px。\t1.5.0\r\n     * SDKVersion\t    string\t客户端基础库版本\t1.1.0\r\n     * benchmarkLevel\tnumber\t性能等级，-2 或 0：该设备无法运行小游戏，-1：性能未知，>=1 设备性能值，该值越高，设备性能越好(目前设备最高不到50)\t1.8.0\r\n     * battery\t        number\t电量，范围 1 - 100\t1.9.0\r\n     * wifiSignal\t    number\twifi 信号强度，范围 0 - 4\r\n     */\r\n    static get systemInfo():object {\r\n        if (!WXCore._systemInfo) {\r\n            WXCore.getSystemInfo();\r\n        }\r\n\r\n        return WXCore._systemInfo;\r\n    }\r\n\r\n    /**\r\n     * 获取wx SDK版本号\r\n     */\r\n    static get SDKVersion():string {\r\n        if (!WXCore._systemInfo) {\r\n            WXCore.getSystemInfo();\r\n        }\r\n\r\n        if (WXCore._systemInfo) {\r\n            return WXCore._systemInfo[\"SDKVersion\"];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取请求携带参数\r\n     */\r\n    static get queryData():object {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  queryData  -\");\r\n        \r\n        if(typeof wx == \"undefined\") return null;\r\n\r\n        let options:object = wx.getLaunchOptionsSync();\r\n        cc.info(\"----  小幺鸡 API ----\");\r\n        cc.info(\"-  wx.getLaunchOptionsSync  -\");\r\n        cc.info(options);\r\n    \r\n        if (options)  return options[\"query\"];\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 获取系统信息\r\n     * \r\n     * @see https://developers.weixin.qq.com/minigame/dev/document/system/system-info/wx.getSystemInfoSync.html\r\n     */\r\n    private static getSystemInfo():void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  getSystemInfo  -\");\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        WXCore._systemInfo = wx.getSystemInfoSync();\r\n    }\r\n\r\n    /**\r\n     * 监听用户点击右上角菜单的“转发”按钮时触发的事件\r\n     * \r\n     * @param title             分享title\r\n     * @param imageURL          分享的图片加载地址\r\n     * @param queryObj          分享携带参数\r\n     * \r\n     * @see https://developers.weixin.qq.com/minigame/dev/document/share/wx.onShareAppMessage.html\r\n     */\r\n    static setOnShareAppMessage(title:string, imageURL:string, queryObj:object = null):void {\r\n        \r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  setOnShareAppMessage  -\");\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        cc.info(title, imageURL, queryObj)\r\n\r\n\r\n        let obj:object = {\r\n            title : title,\r\n            imageUrl : imageURL\r\n        }\r\n\r\n        if (queryObj) {\r\n            let queryStr:string  = \"\";\r\n            for (let key in queryObj) {\r\n                if (queryStr != \"\") queryStr += \"&\";\r\n                queryStr += encodeURIComponent(key) + \"=\" + encodeURIComponent(queryObj[key]);\r\n            }\r\n            obj[\"query\"] = queryStr;\r\n        }\r\n        \r\n\r\n        wx.onShareAppMessage(function():object {\r\n            return obj;\r\n        });\r\n\r\n\r\n        wx.showShareMenu(\r\n            {\r\n                \"withShareTicket\":true\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 显示信息提示\r\n     * \r\n     * @param info 信息内容\r\n     * @param duration 显示时间（毫秒）\r\n     */\r\n    static showToast(info:string, duration:number = 1500):void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  showToast  -\");\r\n        cc.info(info)\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        try {\r\n            wx.showToast({\r\n                \"title\":info,\r\n                \"icon\":\"none\",  \t    //有效值 \"success\", \"loading\", \"none\"\t\r\n                \"duration\":duration,  \t//提示的延迟时间，单位毫秒，默认：1500\r\n                \"mask\":false,           //是否显示透明蒙层，防止触摸穿透，默认：false\t\r\n            });\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    //震动反馈\r\n    static vibrateShort():void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  vibrateShort  -\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        try {\r\n            wx.vibrateShort({});\r\n        } catch (error) {\r\n            cc.info(\"catch a error from wx:\")\r\n            cc.info(error);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 预览图片\r\n     * \r\n     * @param images 图片的url列表\r\n     */\r\n    static previewImage(images:Array<string>):void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  vibrateShort  -\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        try {\r\n            wx.previewImage(\r\n                {\r\n                    \"urls\":images\r\n                }\r\n            );\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 保存图片到相册\r\n     * \r\n     * @param imagePath \r\n     * @param success               保存成功回调\r\n     * @param fail                  保存失败回调\r\n     * @param complete              完成回调\r\n     */\r\n    static saveImageToPhotosAlbum(imagePath:string, success:Function = null, fail:Function = null, complete:Function = null):void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  saveImageToPhotosAlbum  -\");\r\n        cc.info(imagePath);\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        try {\r\n            wx.saveImageToPhotosAlbum(\r\n                {\r\n                    \"filePath\":imagePath,\r\n                    \"success\":success,\r\n                    \"fail\":fail,\r\n                    \"complete\":complete,\r\n                }\r\n            );\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n    \r\n    /**\r\n     * 分享app\r\n     * \r\n     * @param   title       分享的title\r\n     * @param   imageURL    分享的图片url\r\n     * @param   queryObj    分享携带数据\r\n     */\r\n    static shareApp(title:string, imageURL:string, queryObj:object = null):void {\r\n        cc.info(\"----  WX Core ----\");\r\n        cc.info(\"-  shareApp  -\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n\r\n        try {\r\n            let obj:object = {\r\n                title : title,\r\n                imageUrl : imageURL\r\n            }\r\n\r\n            if (queryObj) {\r\n                let queryStr:string  = \"\";\r\n                for (let key in queryObj) {\r\n                    if (queryStr != \"\") queryStr += \"&\";\r\n                    queryStr += encodeURIComponent(key) + \"=\" + encodeURIComponent(queryObj[key]);\r\n                }\r\n                obj[\"query\"] = queryStr;\r\n            }\r\n\r\n            wx.shareAppMessage(obj);\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n    \r\n    \r\n}\r\n"]}