{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers/assets\\Script\\gamecore\\managers\\Utils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\gamecore\\managers","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n/**\n * 功能管理\n */\n@ccclass\nexport default class Utils {\n\n    \n\n\n    //============================================================================\n\n    //iphone x 顶部条高度\n    static get iphoneXTopBarHeight():number {\n        return 44;\n    }\n\n    /**\n     * 检查是否是iphoneX\n     * \n     */\n    static get isIphoneX():boolean {\n        try {\n            return /iphone/gi.test(navigator.userAgent) && (screen.height == 812 && screen.width == 375);\n        } catch (error) {\n            \n        }\n\n        return false;\n    }\n\n\n\n    /**\n     * 将cocos中canvas的rect数据转换为屏幕中的rect数据\n     * \n     * @param rect \n     */\n    static toScreenRect(rect:cc.Rect):cc.Rect {\n        // cc.info(\"!!!!!!!!!!!!!!!!!!!!!!\");\n        let winSize:cc.Size = cc.director.getWinSize();\n        \n        let newRect:cc.Rect = rect.clone();\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height, newRect.xMin, newRect.yMax);\n        //转换为左上角作为(0, 0)点的坐标\n        newRect.x = rect.xMin;\n        newRect.y = winSize.height - newRect.yMax;\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\n        \n        //获取屏幕尺寸\n        let screenSize:cc.Size = cc.view.getFrameSize();\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        // cc.info(screenSize.width, screenSize.height);\n        \n        //计算缩放比例\n        //TODO:NEXT，需要检查canvas的适配策略\n        let s:number = screenSize.height / winSize.height;\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\", s);\n        \n        \n        newRect.x *= s;\n        newRect.y *= s;\n        newRect.width *= s;\n        newRect.height *= s;\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\n\n        return newRect;\n    }\n\n\n    /**\n     * 将屏幕中的矩形区域，转换为cocos中canvas的矩形区域\n     * \n     * @param rect \n     */\n    static fromScreenRect(rect:cc.Rect):cc.Rect {\n        // cc.info(\"!!!!!!!!!!!!!!!!!!!!!!\");\n        // cc.info(\"fromScreenRect\");\n\n        let winSize:cc.Size = cc.director.getWinSize();\n        \n        let newRect:cc.Rect = rect.clone();\n        // cc.info(newRect.x, newRect.y, newRect.width, newRect.height);\n        \n        //获取屏幕尺寸\n        let screenSize:cc.Size = cc.view.getFrameSize();\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        // cc.info(screenSize.width, screenSize.height);\n        newRect.y = screenSize.height - newRect.y - newRect.height;\n        \n        //计算缩放比例\n        //TODO:NEXT，需要检查canvas的适配策略\n        let s:number = screenSize.height / winSize.height;\n        newRect.x /= s;\n        newRect.y /= s;\n        newRect.width /= s;\n        newRect.height /= s;\n        \n        let canvasRect:cc.Rect = new cc.Rect(newRect.x, newRect.y, newRect.width, newRect.height);\n        // cc.info(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\", s);\n        // cc.info(canvasRect.x, canvasRect.y, canvasRect.width, canvasRect.height)\n        return canvasRect;\n    }\n\n\n    /**\n     * 将cocos的资源路径转换为微信小游戏的资源路径。\n     * \n     * @param resourcePath \n     */\n    static toWechatMiniGameResourcePath(resourcePath:string):string {\n        if (resourcePath.charAt(0) == \"/\") resourcePath = resourcePath.substr(1);\n        return \"res/raw-assets/\" + resourcePath;\n    }\n\n\n    /**\n     * 将一个值转换为整型。如果失败，则返回0\n     * \n     * @param value\n     */\n    static toInt(value:any):number {\n        let v:number = parseInt(\"\" + value);\n        if (isNaN(v)) v = 0;\n        return v;\n    }\n\n\n    //==============================================================\n    private static _labelToValueMap:object = {};\n\n    /**\n     * 将一个label的值增加到或减少到另外一个值。\n     * 比如是整数。\n     * \n     * @param label \n     * @param v \n     * @param duration          动画时间\n     */\n    static labelStringToValue(label:cc.Label, v:number, duration:number = 0.5):void {\n        if (isNaN(v)) return;\n        \n        let currentV:number = parseInt(label.string);\n        if (isNaN(currentV) || currentV < 0) currentV = 0;\n        if (currentV == v) return;\n\n        let uuid:string = label.uuid;\n        clearInterval(this._labelToValueMap[uuid]);\n\n        let stepV:number = (v - currentV) / 10;\n        let step:number = 0;\n\n        this._labelToValueMap[uuid] = setInterval(function():void {\n            step++;\n            if (step == 10) {\n                label.string = \"\" + v;\n                // cc.info(\"label to value\", v, label.string);\n                \n                clearInterval(Utils._labelToValueMap[uuid]);\n            } else {\n                label.string = \"\" + (currentV + Math.floor(stepV * step));\n                // cc.info(v, label.string);\n            }\n\n        }, 50);\n    }\n\n\n}\n"]}