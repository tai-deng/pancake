{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\resurgence/assets\\Script\\resurgence\\ResurgenceCtrl.ts"],"names":[],"mappings":";;;;;AAAA,0DAAqD;AACrD,oDAA+C;AAC/C,gEAA2D;AAC3D,oDAA+C;AAEzC,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAA4C,kCAAO;IAE/C;QAAA,YACI,iBAAO,SAEV;QAQO,wBAAkB,GAAQ,CAAC,CAAC;QAThC,KAAI,CAAC,QAAQ,EAAE,CAAC;;IACpB,CAAC;uBALgB,cAAc;IAQ/B,sBAAkB,0BAAQ;aAA1B;YACI,IAAG,CAAC,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,SAAS,GAAG,IAAI,gBAAc,EAAE,CAAC;YAC1D,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;;;OAAA;IAGD,sBAAY,6CAAiB;aAA7B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aACD,UAA8B,CAAQ;YAClC,IAAG,IAAI,CAAC,kBAAkB,IAAI,CAAC,EAAC;gBAC5B,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;gBAE5B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,eAAe,EAAC,KAAK,CAAC,CAAC,CAAC;aAE3D;QACL,CAAC;;;OARA;IASO,iCAAQ,GAAhB;QACI,IAAI,CAAC,iBAAiB,GAAG,qBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAW,CAAC,qBAAqB,CAAC,CAAC;IAC7F,CAAC;IACD,WAAW;IACJ,0CAAiB,GAAxB;QACI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QACpD,qBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAW,CAAC,qBAAqB,EAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC3F,CAAC;IACD,WAAW;IACJ,4CAAmB,GAA1B;QACI,IAAI,IAAI,GAAG,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QACtC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,IAAI,CAAC,CAAA;QACxB,IAAG,IAAI,GAAG,CAAC,EAAC;YACR,qBAAW,CAAC,YAAY,CAAC,iBAAiB,CAAC,wBAAc,CAAC,UAAU,EAAE,CAAC,kBAAkB,EAAE,UAAS,GAAG;oBACnG,IAAG,GAAG,IAAI,IAAI,EAAC;wBACX,iCAAiC;wBACjC,gBAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAA;qBAChC;gBACL,CAAC,CAAC,CAAC,CAAC;YACJ,OAAO,KAAK,CAAC;SAChB;QACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,qBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAW,CAAC,qBAAqB,EAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACvF,SAAS;QACT,IAAI,aAAa,GAAG,qBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAW,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QACpF,qBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAW,CAAC,iBAAiB,EAAC,aAAa,CAAC,CAAA;QACzE,gBAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;IAC7B,CAAC;IACD,YAAY;IACL,6CAAoB,GAA3B;QACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAjDc,wBAAS,GAAgB,IAAI,CAAC;IAP5B,cAAc;QADlC,OAAO;OACa,cAAc,CAyDlC;IAAD,qBAAC;;CAzDD,AAyDC,CAzD2C,EAAE,CAAC,IAAI,GAyDlD;kBAzDoB,cAAc","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\resurgence","sourcesContent":["import StateManage from \"../StateManage/StateManage\";\r\nimport WXCore from \"../gamecore/wechat/WXCore\";\r\nimport GameManager from \"../gamecore/managers/GameManager\";\r\nimport GameEventNames from \"../GameEventNames\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ResurgenceCtrl extends cc.Node {\r\n    \r\n    constructor(){\r\n        super();\r\n        this.initData();\r\n    }\r\n\r\n    private static _instance:ResurgenceCtrl=null;\r\n    public static get instance():ResurgenceCtrl{\r\n        if(!this._instance) this._instance = new ResurgenceCtrl();\r\n        return this._instance;\r\n    }\r\n\r\n    private _resurgenceCardNum:number=0;\r\n    private get resurgenceCardNum():number{\r\n        return this._resurgenceCardNum;\r\n    }\r\n    private set resurgenceCardNum(v:number){\r\n        if(this._resurgenceCardNum != v){\r\n            this._resurgenceCardNum = v;\r\n\r\n            this.dispatchEvent(new cc.Event(\"esurgenceCard\",false));\r\n\r\n        }\r\n    }\r\n    private initData(){\r\n        this.resurgenceCardNum = StateManage.instance.getData(StateManage.KEY_RESURGENCECARDNUM);\r\n    }\r\n    // 获得复活卡 +1\r\n    public addResurgenceCard(){\r\n        this.resurgenceCardNum = this.resurgenceCardNum + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RESURGENCECARDNUM,this.resurgenceCardNum);\r\n    }\r\n    // 使用复活卡 -1\r\n    public minusResurgenceCard(){\r\n        let temp = this.resurgenceCardNum - 1;\r\n        console.log(\"temp\",temp)\r\n        if(temp < 0){\r\n            GameManager.eventManager.dispatchEventWith(GameEventNames.SHOW_ALERT, [\"复活卡不足，是否马上向好友求助？\", function(res){\r\n                if(res == \"ok\"){\r\n                    // WXCore.setOnShareAppMessage();\r\n                    WXCore.showToast(\"分享朋友获得复活卡\")\r\n                }\r\n            }]);\r\n            return false;\r\n        }\r\n        this.resurgenceCardNum = temp;\r\n        StateManage.instance.setData(StateManage.KEY_RESURGENCECARDNUM,this.resurgenceCardNum);\r\n        //使用次数 +1\r\n        let resurgenceCar = StateManage.instance.getData(StateManage.KEY_RESURGENCECAR) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RESURGENCECAR,resurgenceCar)\r\n        WXCore.showToast(\"使用成功!\")\r\n    }\r\n    // 获取当前复活卡数量\r\n    public getResurgenceCardNum():number{\r\n        return this.resurgenceCardNum;\r\n    }\r\n}\r\n"]}