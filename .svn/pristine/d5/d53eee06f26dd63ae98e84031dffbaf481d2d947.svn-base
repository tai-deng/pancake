{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\index/assets\\Script\\index\\index.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\index","sourcesContent":["import GameManager from \"../gamecore/managers/GameManager\";\r\nimport GameEventNames from \"../GameEventNames\";\r\nimport AlertCommand from \"../commands/AlertCommand\";\r\nimport StateManage from \"../StateManage/StateManage\";\r\nimport TaskMode from \"../Task/TaskMode\";\r\nimport WXCore from \"../gamecore/wechat/WXCore\";\r\nimport ResurgenceCtrl from \"../resurgence/ResurgenceCtrl\";\r\nimport XYJAPI from \"../gamecore/xiaoyaoji/XYJAPI\";\r\nimport GameSystem from \"../GameSystem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class index extends cc.Component {\r\n    @property(cc.Node)\r\n    starBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    luckyMoneyBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    rankingBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    resurgenceBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    shoppingBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    soundBar:cc.Node = null;\r\n    @property(cc.Node)\r\n    taskBar:cc.Node = null;\r\n    @property(cc.SpriteFrame)\r\n    voiceON:cc.SpriteFrame=null;\r\n    @property(cc.SpriteFrame)\r\n    voiceOFF:cc.SpriteFrame=null;\r\n    @property(sp.Skeleton)\r\n    spine:sp.Skeleton=null;\r\n    // onLoad () {}\r\n\r\n    // private _tasks:Array<object>=[];\r\n\r\n    \r\n\r\n    start () {\r\n        GameSystem.init();\r\n        // 任务进度监听\r\n        TaskMode.instance.on(\"bubbleChanged\",this.bubbleChanged,this)\r\n\r\n        this.starBar.on(cc.Node.EventType.TOUCH_END,this.onStartGame,this);\r\n        this.luckyMoneyBar.on(cc.Node.EventType.TOUCH_END,this.onLuckyMoney,this);\r\n        this.rankingBar.on(cc.Node.EventType.TOUCH_END,this.onRanking,this);\r\n        this.resurgenceBar.on(cc.Node.EventType.TOUCH_END,this.onResurgence,this);\r\n        this.shoppingBar.on(cc.Node.EventType.TOUCH_END,this.onShopping,this);\r\n        this.soundBar.on(cc.Node.EventType.TOUCH_END,this.onSound,this);\r\n        this.taskBar.on(cc.Node.EventType.TOUCH_END,this.onTask,this);\r\n\r\n        this.initSystem();\r\n        this.refreshUI();\r\n        this.schedule(function() {\r\n            this.spineAnimation();\r\n        }, this.interval);\r\n    }\r\n\r\n    private static _systemInitialized:boolean;\r\n    // 任务气泡\r\n    private _flicker:boolean=TaskMode.instance.flicker;\r\n    // 排行气泡动画,默认进入游戏就会闪,查看后停止\r\n    private _rankBubble:boolean=StateManage.instance.getData(StateManage.KEY_RANKBUBBLE);\r\n    private interval:number=5;\r\n\r\n    // spine ainimation\r\n    private spineAnimation(){\r\n        let arr = [\"interlude\",\"toppot\"]\r\n        let index = Math.floor(Math.random()*2);\r\n        if(index == 2) index = 1;\r\n        this.spine.animation=arr[index];\r\n        this.interval = Math.floor(Math.random() * 20) +5;\r\n    }\r\n    private initSystem():void {\r\n        if (index._systemInitialized) return;\r\n        index._systemInitialized = true;\r\n\r\n        // 綁定弹窗事件到命令\r\n        GameManager.context.mapEvent(GameEventNames.SHOW_ALERT, AlertCommand);\r\n    }\r\n    private bubbleChanged(ev:cc.Event):void{\r\n        this._flicker = TaskMode.instance.flicker;\r\n        this.refreshTaskState();\r\n    }\r\n    private refreshUI(){\r\n        if(!this._isOnLoadCalled)return;\r\n        let rankBubbleNode = cc.find(\"Canvas/controlLeft/ranking/marvel\")\r\n        console.log(\"_rankBubble\",this._rankBubble);\r\n        if(this._rankBubble){\r\n            this.buMotion(rankBubbleNode,3);\r\n        }else{\r\n            this.buMotion(rankBubbleNode,1);\r\n        }\r\n\r\n        /* let voiceSwitch = GameManager.soundsManager.musicMuted;\r\n        if(voiceSwitch){\r\n            this.soundBar.getComponent(cc.Sprite).spriteFrame = this.voiceON;\r\n            GameManager.soundsManager.muteMusic();\r\n        }else{\r\n            this.soundBar.getComponent(cc.Sprite).spriteFrame = this.voiceOFF;\r\n            GameManager.soundsManager.unmuteMusic();\r\n        } */\r\n        this.refreshTaskState();\r\n        \r\n        if(typeof wx == \"undefined\") return;\r\n        wx.getUserInfo({\r\n            success(res){\r\n                let openData = wx.getOpenDataContext()\r\n                openData.postMessage({\r\n                    \"userInfo\":res.userInfo,\r\n                })\r\n                console.log(\"传用户信息\",res)\r\n            }\r\n        })\r\n\r\n    }\r\n    // 获取任务状态改变气泡\r\n    private refreshTaskState():void {\r\n        let litterNode:cc.Node = cc.find(\"Canvas/controlRight/task/marvel\");\r\n        let motion:number = this._flicker? 3:2;\r\n        this.buMotion(litterNode, motion);\r\n    }\r\n    // 气泡动作\r\n    private buMotion(node:cc.Node,num:number){\r\n        if(num == 3){\r\n            let seq = cc.repeatForever(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.8,1.1,1.1),\r\n                    cc.scaleTo(0.4,0.9,0.9)\r\n            ));\r\n            node.runAction(seq);\r\n            node.active = true;\r\n        }else if(num == 2){\r\n            node.active = true;\r\n        }else if(num == 1){\r\n            node.active = false;\r\n        }\r\n    }\r\n    // 开始\r\n    private onStartGame(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        cc.director.loadScene(\"gameScene\");\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n        let openData = wx.getOpenDataContext()\r\n        openData.postMessage({\r\n            \"integral\":60,\r\n            \"direction\":3,\r\n            \"posX\":100,\r\n            \"posY\":500,\r\n        })\r\n        console.log(\"主游戏子域\")\r\n    }\r\n    // 红包\r\n    private onLuckyMoney(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        console.log(\"---红包---\");\r\n        cc.director.loadScene(\"luckyMoney\");\r\n    }\r\n    // 排行\r\n    private onRanking(e:cc.Event):void{\r\n        cc.director.loadScene(\"ranking\");\r\n        StateManage.instance.setData(StateManage.KEY_RANKBUBBLE,false);\r\n        GameManager.soundsManager.playTapSound();\r\n\r\n\r\n        if(typeof wx == \"undefined\") return;\r\n        let openData = wx.getOpenDataContext()\r\n        openData.postMessage({\r\n            \"direction\":2,\r\n        })\r\n        console.log(\"排行榜子域\")\r\n    }\r\n    // 复活\r\n    private onResurgence(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        cc.director.loadScene(\"resurgence\");\r\n    }\r\n    // 商店\r\n    private onShopping(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        cc.director.loadScene(\"shopping\");\r\n    }\r\n    // 音效\r\n    private onSound(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        let voiceSwitch = GameManager.soundsManager.musicMuted;\r\n        if(voiceSwitch){\r\n            // 停止播放背景音乐\r\n            this.soundBar.getComponent(cc.Sprite).spriteFrame = this.voiceOFF;\r\n            GameManager.soundsManager.muteMusic();\r\n        }else{\r\n            // 播放背景音乐\r\n            this.soundBar.getComponent(cc.Sprite).spriteFrame = this.voiceON;\r\n            GameManager.soundsManager.unmuteMusic();\r\n        }\r\n        console.log(\"---背景音效---\");\r\n    }\r\n    // 任务\r\n    private onTask(e:cc.Event):void{\r\n        GameManager.soundsManager.playTapSound();\r\n        cc.director.loadScene(\"task\");\r\n    }\r\n    // update (dt) {}\r\n    // onDestroy() {}\r\n\r\n\r\n    // 宝石 +10\r\n    public gem(){\r\n        let gem = StateManage.instance.getData(StateManage.KEY_GEM) + 10;\r\n        let tagem = StateManage.instance.getData(StateManage.KEY_GEM) + 10;\r\n        cc.log(gem,\"*************\")\r\n        StateManage.instance.setData(StateManage.KEY_GEM,gem)\r\n        StateManage.instance.setData(StateManage.KEY_TAGEM,tagem)\r\n    }\r\n    // 翻转次数 + 5\r\n    public overturn(){\r\n        let overturn = StateManage.instance.getData(StateManage.KEY_OVERTURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_OVERTURN,overturn)\r\n    }\r\n    // 一周转体次数 + 5\r\n    public turn(){\r\n        let turn = StateManage.instance.getData(StateManage.KEY_TURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_TURN,turn)\r\n    }\r\n    // 十秒内翻转次数 + 5\r\n    public tmturn(){\r\n        let tmturn = StateManage.instance.getData(StateManage.KEY_TMTURN) + 5;\r\n        StateManage.instance.setData(StateManage.KEY_TMTURN,tmturn)\r\n    }\r\n    // 等级 + 1\r\n    public grade(){\r\n        let grade = StateManage.instance.getData(StateManage.KEY_TAGRADE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_GRADE,grade)\r\n        StateManage.instance.setData(StateManage.KEY_TAGRADE,grade)\r\n    }\r\n    // 累计使用复活卡次数 + 1\r\n    public resurgenceCar(){\r\n        let resurgenceCar = StateManage.instance.getData(StateManage.KEY_RESURGENCECAR) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RESURGENCECAR,resurgenceCar)\r\n    }\r\n    // 好友接力次数 + 1\r\n    public fdrelay(){\r\n        let fdrelay = StateManage.instance.getData(StateManage.KEY_FDRELAY) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_FDRELAY,fdrelay)\r\n    }\r\n    // 疯狂点击中点次数 + 10\r\n    public crazyTap(){\r\n        let crazyTap = StateManage.instance.getData(StateManage.KEY_CRAZYTAP) + 10;\r\n        StateManage.instance.setData(StateManage.KEY_CRAZYTAP,crazyTap)\r\n    }\r\n    // 累计任意分享 + 1\r\n    public anyShare(){\r\n        let anyShare = StateManage.instance.getData(StateManage.KEY_ANYSHARE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_ANYSHARE,anyShare)\r\n    }\r\n    // 煎烤好友并分享 + 1\r\n    public ripeShare(){\r\n        let ripeShare = StateManage.instance.getData(StateManage.KEY_RIPESHARE) + 1;\r\n        StateManage.instance.setData(StateManage.KEY_RIPESHARE,ripeShare)\r\n    }\r\n    // 复活卡数量 + 1\r\n    public tasknuma(){\r\n        ResurgenceCtrl.instance.addResurgenceCard();\r\n    }\r\n    // 复活卡数量 - 1\r\n    public tasknumb(){\r\n        ResurgenceCtrl.instance.minusResurgenceCard();\r\n    }\r\n    // 增加70分\r\n    public tasknumc(){\r\n        console.log(\"功能移除了\")\r\n    }\r\n    // 第二天 + 1\r\n    public nextDay(){\r\n        // let nextDay = StateManage.instance.getData(StateManage.KEY_NEXTDAY) + 86400000;\r\n        // StateManage.instance.setData(StateManage.KEY_NEXTDAY,nextDay)\r\n        let toDay = new Date().getTime() + 86400000;\r\n        StateManage.instance.setData(StateManage.KEY_TODAY,toDay)\r\n        cc.log(StateManage.instance.getData(StateManage.KEY_TODAY))\r\n    }\r\n    // 关闭首页子域\r\n    public offDeed(){\r\n        console.log(\"功能移除了\")\r\n    }\r\n}\r\n"]}