{"version":3,"sources":["../../../../../../assets/Script/gamecore/xiaoyaoji/assets/Script/gamecore/xiaoyaoji/XYJAPI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/gamecore/xiaoyaoji","sourcesContent":["import GameManager from \"../managers/GameManager\";\nimport WXCore from \"../wechat/WXCore\";\n\n// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\nif(typeof wx != \"undefined\"){\n    wx.onShow(function(res:object):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  wx.onShow  -\");\n        cc.info(res);\n\n        XYJAPI.inviterOpenID = res[\"query\"].openId;\n        XYJAPI.inviterChannel = res[\"query\"].channel;\n    });\n}\n\n/**\n * 小幺鸡api\n * \n * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/UNX8Vu1aN?password=wx\n */\n@ccclass\nexport default class XYJAPI {\n\n    //渠道id\n    static channelID:string = null;\n\n    //版本号\n    static gameVersion:string = null;\n\n    //邀请者id\n    static inviterOpenID:string = null;\n\n    //来源渠道\n    static inviterChannel:string = null;\n\n\n    private static userToken:string = null;\n\n    static userOpenID:string = null;\n\n    private static encryptedData:string = null;\n    private static iv:string = null;\n\n    /**\n     * avatarUrl\tstring\t用户头像图片 url\t\n     * city\t        string\t用户所在城市\t\n     * country\t    string\t用户所在国家\t\n     * gender\t    number\t用户性别\t\n     * language\t    string\t显示 country province city 所用的语言\t\n     * nickName\t    string\t用户昵称\t\n     * openId\t    string\t用户 openId\t\n     * province\t    string\t用户所在省份\n     */\n    private static userInfo:object = null;\n    private static userUnionID:string = null;\n\n\n\n    //是否已初始化\n    static _initialized:boolean;\n\n    /**\n     * 初始化\n     */\n    static init():void {\n        if (XYJAPI._initialized) return;\n        XYJAPI._initialized = true;\n\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  init   -\");\n        \n        if(typeof wx == \"undefined\") return;\n\n        wx.login(\n            {\n                \"success\":XYJAPI.loginCallback,\n            }\n        );\n    }\n\n\n\n    /**\n     * 用户的登陆回调\n     * \n     * \n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/MsJg6RxLg\n     * \n     * @param res \n     */\n    private static loginCallback(res:object):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  loginCallback   -\");\n        cc.info(res);\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Auth.WechatLogin\",\n\n            data : {\n                code : \"\" + res[\"code\"],\n                opId : \"\" + XYJAPI.inviterOpenID,\n                channel : \"\" + XYJAPI.inviterChannel,\n            },\n\n            header : {\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"POST\",\n\n            success : XYJAPI.loginFeedbackCallback\n        });\n    }\n\n    /**\n     * 向小幺鸡平台发送登陆反馈后回调\n     */\n    private static loginFeedbackCallback(res:object):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  loginFeedbackCallback   -\");\n        cc.info(res);\n\n        XYJAPI.userOpenID = res[\"data\"].data.openid;\n        XYJAPI.userToken = res[\"data\"].data.token;\n\n        cc.info(\"userOpenID=\" + XYJAPI.userOpenID);\n        cc.info(\"userToken=\" + XYJAPI.userToken);\n\n\n        wx.getUserInfo({\n            \"success\":XYJAPI.getUserInfoCallback\n        });\n    }\n\n\n    /**\n     * 获取用户信息回调\n     * @param res\n     */\n    private static getUserInfoCallback(res:object):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getUserInfoCallback   -\");\n        cc.info(res);\n\n        XYJAPI.encryptedData = res[\"encryptedData\"];\n        XYJAPI.iv = res[\"iv\"];\n        XYJAPI.userInfo = res[\"userInfo\"];\n\n        cc.info(\"encryptedData=\" + XYJAPI.encryptedData);\n        cc.info(\"iv=\" + XYJAPI.iv);\n        cc.info(\"userInfo=\", XYJAPI.userInfo);\n\n\n        if(typeof wx == \"undefined\") return;\n\n        //登录绑定unionid\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Auth.Binding\",\n            data : {\n                encryptedData : XYJAPI.encryptedData,\n                iv : XYJAPI.iv,\n            },\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"POST\",\n\n            \"success\":XYJAPI.loginBindingCallback\n        });\n    }\n\n\n    /**\n     * 登陆绑定\n     * \n     * @param res\n     */\n    private static loginBindingCallback(res:object):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getUserInfoCallback   -\");\n        cc.info(res);\n\n        XYJAPI.userUnionID = res[\"data\"].data.unionId;\n        cc.info(\"userUnionID=\" +  XYJAPI.userUnionID);\n\n        //绑定成功后，获取复活卡数目\n        XYJAPI.getRevive();\n        //获取是否可分享并获得复活卡\n        XYJAPI.getRemoteCanShare();\n        //获取公众号二维码图片信息\n        XYJAPI.getWXMiniAppData();\n        //获取分享的数据\n        XYJAPI.getShareData();\n    }\n\n\n    //远程设置值，是否可分享\n    private static _r_canShare:boolean;\n\n\n    /**\n     * 是否可以分享。\n     */\n    static get canShare():boolean {\n        return XYJAPI._r_canShare;\n    }\n\n\n    \n    /**\n     * 获取远程设置的是否可分享的值\n     */\n    private static getRemoteCanShare():void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getRemoteCanShare  -\");\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Share.AppSet\",\n\n            header : {\n\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n\n            },\n\n            method : \"GET\",\n\n            success : (res)=>{\n                cc.info(\"---- Ball.Api.Share.AppSet ----\")\n                cc.info(res);\n\n                if (res[\"data\"] && res[\"data\"].data) {\n                    XYJAPI._r_canShare = (res[\"data\"].data.status == 1);\n                    cc.info(\"分享是否已开启\" + XYJAPI._r_canShare);\n                }\n                    \n            },\n\n        });\n    }\n\n\n    private static _reviveCount:number = 0;\n\n    /**\n     * 获取复活卡数量\n     */\n    static get reviveCount():number {\n        return this._reviveCount;\n    }\n\n    /**\n     * 获取复活卡数量。回调方法接收一个number类型的参数。\n     */\n    static getRevive(callback:Function = null):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getRevive  -\");\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Share.GetRevive\",\n\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"GET\",\n\n            success : function(res):void {\n                cc.info(\"---- Ball.Api.Share.GetRevive ----\")\n                cc.info(res);\n\n                XYJAPI._reviveCount = res.data.data.revive;\n                cc.info(\"用户剩余的复活卡\" + XYJAPI._reviveCount);\n\n                if (callback != null) {\n                    callback.call(null, XYJAPI._reviveCount);\n                }\n            },\n        });\n    }\n\n\n    /**\n     * 使用复活卡\n     * \n     * @param callback \n     */\n    static useRevive(callback:Function = null):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  userRevive  -\");\n\n        if (XYJAPI._reviveCount <= 0) {\n            cc.info(\"复活卡数量不足\");\n            return;\n        }\n\n        //减少一个复活卡\n        XYJAPI._reviveCount--;\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Share.SetRevive\",\n\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n\n            },\n\n            method : \"GET\",\n\n            success : function(res:object):void {\n                cc.info(\"---- Ball.Api.Share.SetRevive ----\")\n                cc.info(res);\n\n                let suc:boolean = (res && res[\"data\"] && res[\"data\"].code == 200);\n\n                if (callback != null) {\n                    callback.apply(null, suc);\n                }\n            },\n\n\n        });\n    }\n\n\n\n    /**\n     * 保存分数\n     * \n     * @param score \n     */\n    static saveScore(score:number):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  saveScore  -\");\n        cc.info(score);\n\n        if(typeof wx == \"undefined\") return;\n\n        cc.info(\"-  data  -\");\n        cc.info({score : \"\" + score, headimg: XYJAPI.userInfo[\"avatarUrl\"],nickname : XYJAPI.userInfo[\"nickName\"],});\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Share.SaveScore\",\n\n            data : {\n                score : \"\" + score,\n                headimg: XYJAPI.userInfo[\"avatarUrl\"],\n                nickname : XYJAPI.userInfo[\"nickName\"],\n             },\n\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"POST\",\n\n            success : function(res:object):void {\n                cc.info(\"---- Ball.Api.Share.SaveScore ----\")\n                cc.info(res);\n            },\n        });\n    }\n\n\n    //从服务器获取的分享数据\n    //{\"imageurl\":string, \"title\":string}\n    private static _shareData:object;\n\n\n    /**\n     * 获取分享数据\n     * \n     * @param callback      接受一个object对象:\n     * \n     * {\"imageurl\":string, \"title\":string}\n     *  \n     */\n    static getShareData(callback:Function = null):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getShareData  -\");\n        \n        if (XYJAPI._shareData) {\n            if (callback != null) {\n                callback.call(null, XYJAPI._shareData);\n            }\n            return;\n        }\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Share.Get\",\n\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"GET\",\n\n            success : function(res:object):void {\n                cc.info(\"---- Ball.Api.Share.Get ----\")\n                cc.info(res);\n\n                XYJAPI._shareData = res[\"data\"][\"data\"];\n                if (XYJAPI._shareData) {\n                    if (callback != null) {\n                        callback.call(null, XYJAPI._shareData);\n                    }\n\n                    WXCore.setOnShareAppMessage(\n                        XYJAPI._shareData[\"title\"],\n                        XYJAPI._shareData[\"imageurl\"],\n                        \"openId=\" + XYJAPI.userOpenID + \"&channel=\" + XYJAPI.channelID\n                    );\n                }\n            },\n        });\n    }\n\n    /**\n     * 获取交叉推广图\n     * \n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/Rif1Qd3cp\n     */\n    static getAdImage(callback:Function):void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getAdImage   -\");\n\n        if(typeof wx == \"undefined\") return;\n\n        wx.request({\n            \"url\":\"https://ball.yz071.com/api/?do=Ball.Api.Share.Shunt\",\n            \"data\":{\n            },\n\n            \"header\" : {\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            \"method\":\"GET\",\n\n            \"success\":function(res:object):void {\n                cc.info(\"---- Ball.Api.Share.Shunt ----\")\n                cc.info(res);\n\n                if (res && res[\"data\"]) {\n                    //这里返回了很多图片，需要去一个比例最接近的尺寸\n                    let images:Array<object> = res[\"data\"].data;\n                    if (!images || images.length == 0) return;\n\n                    let winSize:cc.Size = cc.director.getWinSize();\n                    let currentHWV:number = winSize.height / winSize.width;\n\n                    let minHWV:number = 100;\n                    let minHWVObj:object;\n\n                    for (let i:number = 0; i < images.length; i++) {\n                        //{imageurl: \"https://ball.yz071.com/Upload/image/2018-06-06/P_15282657218141544.jpg \", title: \"篮球大作战\", bili: \"4:3\"}\n                        let imgObj:object = images[i];\n\n                        let hwv:Array<string> = String(imgObj[\"bili\"]).split(\":\");\n                        let v:number = Math.abs(Number(hwv[0]) / Number(hwv[1]) - currentHWV);\n                        cc.info(\"current hwv is \" + v);\n\n                        if (v < minHWV) {\n                            minHWV = v;\n                            minHWVObj = imgObj;\n                        }\n                    }\n\n                    if (minHWVObj) {\n                        callback.call(null, minHWVObj);\n                    }\n\n                }\n            }\n\n        });\n    }\n\n\n\n    //从服务器获取的分享数据\n    //{\"imageurl\":string}\n    private static _wxMiniAppData:object;\n\n\n    /**\n     * 微信小程序数据\n     * \n     * {\"imageurl\":string}\n     */\n    static get wxMiniAppData():object {\n        if (XYJAPI._wxMiniAppData) {\n            return XYJAPI._wxMiniAppData;\n        }\n\n        XYJAPI.getWXMiniAppData();\n        return null;\n    }\n\n\n\n    //是否正在请求微信小程序数据\n    private static _isGettingWXMiniAppData:boolean;\n\n    /**\n     * 获取微信小程序数据\n     * \n     * \n     * @see http://www.xiaoyaoji.cn/share/MsmrbiWWx/VBHsTd2nE\n     * \n     * \n     *  \n     */\n    private static getWXMiniAppData():void {\n        cc.info(\"----  小幺鸡 API ----\");\n        cc.info(\"-  getWXMiniAppData  -\");\n        cc.info(\"is requesting is\" + XYJAPI._isGettingWXMiniAppData);\n\n        if (XYJAPI._isGettingWXMiniAppData) return;\n        \n        if(typeof wx == \"undefined\") return;\n\n        //标记正在请求数据\n        XYJAPI._isGettingWXMiniAppData = true;\n\n        wx.request({\n            url : \"https://ball.yz071.com/api/?do=Ball.Api.Erweima.GetMoney\",\n\n            header : {\n                \"X-Token\": XYJAPI.userToken,\n                \"X-Version\": XYJAPI.gameVersion,\n                \"X-Source\": XYJAPI.channelID,\n            },\n\n            method : \"GET\",\n\n            success : function(res:object):void {\n                cc.info(\"---- Ball.Api.\bErweima.GetMoney ----\")\n                cc.info(res);\n\n                XYJAPI._wxMiniAppData = res[\"data\"][\"data\"];\n            },\n\n            complete : function():void {\n                XYJAPI._isGettingWXMiniAppData = false;\n            }\n        });\n    }\n}\n"]}