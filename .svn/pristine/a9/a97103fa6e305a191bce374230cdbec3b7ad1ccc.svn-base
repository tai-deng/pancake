{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\RankCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import WXCore from \"./WXCore\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RankCtrl extends cc.Node {\r\n    constructor(){\r\n        super();\r\n        this.onMessage();\r\n    }\r\n    private static _instance:RankCtrl=null;\r\n    public static get instance():RankCtrl{\r\n        if(!this._instance) this._instance = new RankCtrl();\r\n        return  this._instance;\r\n    }\r\n    private _flicker:boolean;\r\n    get flicker():boolean{\r\n        return this._flicker;\r\n    }\r\n    set flicker(v:boolean){\r\n        if(this._flicker != v){\r\n            this._flicker=v;\r\n            this.dispatchEvent(new cc.Event(\"onRankBubble\",false))\r\n        }\r\n    }\r\n    private avatarUrl:string;\r\n    // 即将超越下一位\r\n    private _detectionNext:object={};\r\n    get detectionNext():object{\r\n        return this._detectionNext;\r\n    }\r\n    set detectionNext(v:object){\r\n        if(this._detectionNext !=v){\r\n            this._detectionNext = v;\r\n\r\n        }\r\n    }\r\n    // 第几名\r\n    private _currentIndex:number=0;\r\n    get currentIndex():number{\r\n        return this._currentIndex;\r\n    }\r\n    set currentIndex(v:number){\r\n        if(this._currentIndex != v){\r\n            this._currentIndex = v;\r\n            this.dispatchEvent(new cc.Event(\"getSelfRank\",false))\r\n        }\r\n    }\r\n    // 所有排行数据\r\n    private _totalRank:Array<object>=[];\r\n    get totalRank():Array<object>{\r\n        return this._totalRank;\r\n    }\r\n    set totalRank(v:Array<object>){\r\n        if(this._totalRank != v){\r\n            this._totalRank = v;\r\n            console.log(\"==总榜数据==\",this._totalRank);\r\n            this.dispatchEvent(new cc.Event(\"getTotalRankEvent\",false));\r\n        }\r\n    }\r\n    // 自己的游戏数据\r\n    private _selfRank:object={};\r\n    get selfRank():object{\r\n        return this._selfRank;\r\n    }\r\n    set selfRank(v:object){\r\n        if(this._selfRank != v){\r\n            this._selfRank = v;\r\n            console.log(\"==个人数据==\",this._selfRank)\r\n            this.dispatchEvent(new cc.Event(\"getselfRankEvent\",false));\r\n        }\r\n    }\r\n    // 小排行榜数据\r\n    private _smallRank:Array<object>=[];\r\n    get smallRank():Array<object>{\r\n        return this._smallRank;\r\n    }\r\n    set smallRank(v:Array<object>){\r\n        if(this._smallRank != v){\r\n            this._smallRank = v;\r\n            console.log(\"==小榜数据==\",this._smallRank)\r\n            this.dispatchEvent(new cc.Event(\"getsmallRank\",false));\r\n        }\r\n    }\r\n\r\n    public initData(){\r\n        this.allDataTrim();\r\n        this.selfDataTrim();\r\n        // this.smallDataTrim();\r\n    }\r\n    // 朋友的游戏数据处理\r\n    private allDataTrim():void{\r\n        let that:RankCtrl = this;\r\n        function success(res){\r\n            let arr = res.data;\r\n            let tempData:Array<object>=[];\r\n\r\n            for(let i = 0;i < arr.length;i++){\r\n                let parts:Array<object> = arr[i][\"KVDataList\"];\r\n                let max:number=JSON.parse(parts[0][\"value\"])[\"wxgame\"][\"score\"];\r\n                let time:number=JSON.parse(parts[0][\"value\"])[\"wxgame\"][\"update_time\"];\r\n                let user:object={};\r\n                for(let j = 0;j < parts.length;++j){\r\n                    if(j+1<parts.length){\r\n                        let score1 = JSON.parse(parts[j+1][\"value\"])[\"wxgame\"][\"score\"];\r\n                        let time1 = JSON.parse(parts[j+1][\"value\"])[\"wxgame\"][\"update_time\"];\r\n                        if(max < score1){\r\n                            max = score1;\r\n                            time = time1;\r\n                        }\r\n                    }\r\n                }\r\n                if(arr[i][\"nickname\"]){\r\n                    user[\"maxScore\"] = max;\r\n                    user[\"dateTime\"] = time;\r\n                    user[\"avatarUrl\"] = arr[i][\"avatarUrl\"];\r\n                    user[\"nickname\"] = arr[i][\"nickname\"];\r\n                    user[\"openid\"] = arr[i][\"openid\"];\r\n                    tempData.push(user);\r\n                }\r\n            }\r\n            // 按分数降序\r\n            that.totalRank = tempData.sort(function (obj1, obj2) {\r\n                var val1 = obj1[\"maxScore\"];\r\n                var val2 = obj2[\"maxScore\"];\r\n                if (val1 < val2) {\r\n                    return 1;\r\n                } else if (val1 > val2) {\r\n                    return -1;\r\n                } else {\r\n                    return 0;\r\n                }            \r\n            });\r\n            \r\n            for(let i =0;i < that.totalRank.length;++i){\r\n                that.totalRank[i][\"rank\"] = i+1;\r\n            }\r\n            that.smallDataTrim();\r\n            console.log(res,\"--朋友的数据--\",that.totalRank)\r\n        }\r\n        WXCore.getFriendData(success,function(res){\r\n            console.log(res,\"朋友的数据---err\")\r\n        })\r\n    }\r\n    // 我的游戏数据处理\r\n    private selfDataTrim():void{\r\n        let that = this;\r\n        let success = function(res){\r\n            console.log(res,\"我的游戏数据--处理前\")\r\n            let arr = res.KVDataList;\r\n            let max:number=JSON.parse(arr[0][\"value\"])[\"wxgame\"][\"score\"];\r\n            let time:number=JSON.parse(arr[0][\"value\"])[\"wxgame\"][\"update_time\"];\r\n            for(let j = 0;j < arr.length;++j){\r\n                if(j+1<arr.length){\r\n                    let score1 = JSON.parse(arr[j+1][\"value\"])[\"wxgame\"][\"score\"];\r\n                    let time1 = JSON.parse(arr[j+1][\"value\"])[\"wxgame\"][\"update_time\"];\r\n                    if(max < score1){\r\n                        max = score1;\r\n                        time = time1;\r\n                    }\r\n                }\r\n            }\r\n            let obj = {};\r\n            obj[\"maxScore\"] = max;\r\n            obj[\"dateTime\"] = time;\r\n            obj[\"isSelf\"] = true;\r\n            that.selfRank = obj;\r\n            console.log(\"--我的数据--处理后\",that.selfRank)\r\n        }\r\n\r\n        WXCore.getUserScore(success,function(res){\r\n            console.log(res,\"我的游戏数据---err\")\r\n        })\r\n    }\r\n    // 小排行榜数据处理\r\n    private smallDataTrim():void{\r\n        if(!this.totalRank) return;\r\n        console.log(this.currentIndex,\"当前排名\")\r\n        let allData = this.totalRank.concat();\r\n        let selfData = this.selfRank;\r\n        let selfTemp:Array<object>=[];\r\n        let selfAvatarUrl = this.avatarUrl;\r\n        let arr:Array<number>=[];\r\n\r\n        for(let i =0;i < allData.length;i++){\r\n            \r\n            let Url = allData[i][\"avatarUrl\"]\r\n            let newUrl = Url.substring(0,Url.lastIndexOf('/'));\r\n\r\n            console.log(\"自己\",selfAvatarUrl,\"大家\",newUrl)\r\n            if(selfAvatarUrl == newUrl){\r\n                this.currentIndex = i;\r\n            }\r\n        }\r\n\r\n        allData[this.currentIndex][\"isSelf\"]=true;\r\n        if(this.currentIndex == allData.length-1 && this.currentIndex > 0){\r\n            if(allData[this.currentIndex-2]){\r\n                arr[0] = this.currentIndex-2;\r\n                arr[1] = this.currentIndex-1;\r\n                arr[2] = this.currentIndex;\r\n            }else if(allData[this.currentIndex-1]){\r\n                arr[0] = this.currentIndex-1;\r\n                arr[1] = this.currentIndex;\r\n            }else{\r\n                arr[0] = this.currentIndex;\r\n            }\r\n        }else if(this.currentIndex == 0){\r\n            if(allData[this.currentIndex+2]){\r\n                arr[0] = this.currentIndex;\r\n                arr[1] = this.currentIndex+1;\r\n                arr[2] = this.currentIndex+2;\r\n            }else if(allData[this.currentIndex+1]){\r\n                arr[0] = this.currentIndex+1;\r\n                arr[1] = this.currentIndex;\r\n            }else{\r\n                arr[0] = this.currentIndex;\r\n            }\r\n        }else{\r\n            arr[0] = this.currentIndex-1;\r\n            arr[1] = this.currentIndex;\r\n            arr[2] = this.currentIndex+1;\r\n        }\r\n\r\n        for(let i = 0;i < arr.length;i++){\r\n            selfTemp.push(allData[arr[i]]);\r\n        }\r\n\r\n        this.smallRank.length = 0;\r\n        this.smallRank = selfTemp;\r\n        console.log(allData,\"------*------\",arr,\"------*------\",this.currentIndex,\"-------+++----\",this.smallRank);\r\n    }\r\n    // 获取总榜排名\r\n    public getTotallRank(){\r\n        console.log(\"获取总榜排名\",this.totalRank)\r\n        return this.totalRank.concat();\r\n        // return [];\r\n    }\r\n    // 获取自己的排名\r\n    public getSelfRank(){\r\n        let obj = this.totalRank[this.currentIndex];\r\n        let newObj = {};\r\n        for (const k in obj) {\r\n            newObj[k] = obj[k];\r\n        }\r\n        // obj[\"isSelf\"] = true;\r\n        console.log(\"获取自己的排名\",this.selfRank)\r\n        return newObj;\r\n    }\r\n    // 获取小排行榜数据\r\n    public getSmallRank(){\r\n        console.log(\"获取小排行榜数据\",this.smallRank)\r\n        return this.smallRank.concat();\r\n        // return [];\r\n    }\r\n    // 小排行榜获取即将超越的朋友\r\n    public surpassNext(){\r\n        console.log(\"即将超越的朋友\");\r\n        let totalRank:Array<object> = this.totalRank.concat();\r\n        let index:number = this.currentIndex;\r\n        let obj:object = {};\r\n        if(totalRank[index-1]){\r\n            obj = totalRank[index-1];\r\n        }else{\r\n            obj = totalRank[index];\r\n        }\r\n        return obj;\r\n    }\r\n    // 接收主域消息\r\n    private onMessage(){\r\n        let that = this;\r\n        if(typeof wx == \"undefined\") return;\r\n        wx.onMessage(function(res){\r\n\r\n            if(res.direction == 1){\r\n                let scene = cc.director.getScene().name;\r\n                if(scene != \"smallRank\"){\r\n                    cc.director.loadScene(\"smallRank\");\r\n                }\r\n            }\r\n\r\n            if(res.direction == 2){\r\n                cc.director.loadScene(\"wholeRank\");\r\n                console.log(\"跳转大排行榜\")\r\n                that.flicker = false;\r\n            }\r\n\r\n            if(res.direction == 3){\r\n                cc.director.loadScene(\"gameScene\");\r\n                console.log(\"跳转游戏场景\")\r\n            }\r\n\r\n            if(typeof res.integral == \"number\"){\r\n                console.log(\"(((~)))\",res[\"integral\"])\r\n                that.onDetectionNext(res);\r\n            }\r\n\r\n            if(res.userInfo){\r\n                let str = res.userInfo.avatarUrl;\r\n                that.avatarUrl = str.substring(0,str.lastIndexOf('/'));\r\n                that.initData();\r\n            }\r\n            console.log(res,\"接收主域消息\");\r\n        })\r\n    }\r\n    // GameScene 即将超越的下一位\r\n    private onDetectionNext(res:object){\r\n        let arr = this.totalRank.concat();\r\n        let temp = {\"maxScore\":res[\"integral\"],\"next\":true}\r\n        let index:number;\r\n        arr.push(temp)\r\n        console.log(\"(((!)))\",arr,temp)\r\n        let newArr:Array<object> = arr.sort(function (obj1, obj2) {\r\n            var val1 = obj1[\"maxScore\"];\r\n            var val2 = obj2[\"maxScore\"];\r\n            if (val1 < val2) {\r\n                return 1;\r\n            } else if (val1 > val2) {\r\n                return -1;\r\n            } else {\r\n                return 0;\r\n            }            \r\n        });\r\n\r\n        for(let i = 0;i < newArr.length;i++){\r\n            if(newArr[i][\"next\"]){\r\n                index=i;\r\n            }\r\n        }\r\n        console.log(\"(((@)))\",index)\r\n\r\n        if(index-1 <= 0){\r\n            index = 0;\r\n        }else if(index-1 == this.totalRank.length-1){\r\n            index = this.totalRank.length-1;\r\n        }else{\r\n            index = index - 1;\r\n        }\r\n        console.log(\"(((#)))\",index)\r\n        if(this.totalRank[index]){\r\n            let winSize:cc.Size = cc.director.getWinSize();\r\n            cc.info(\"子域winsize\", winSize.width, winSize.height);\r\n            this.detectionNext = {\r\n                \"nickname\":this.totalRank[index][\"nickname\"],\r\n                \"avatarUrl\":this.totalRank[index][\"avatarUrl\"],\r\n                \"posX\":res[\"posX\"] * winSize.width,\r\n                \"posY\":res[\"posY\"] * winSize.height,\r\n                \"point\":this.totalRank[index][\"maxScore\"],\r\n                \"self\":true,\r\n            }\r\n\r\n            if(this.currentIndex == index){\r\n                this.detectionNext[\"self\"] = true;\r\n            }else{\r\n                this.detectionNext[\"self\"] = false;\r\n            }\r\n        }\r\n        this.dispatchEvent(new cc.Event(\"onDetectionNextFd\",false));\r\n        if(this.currentIndex>index){\r\n            this.flicker=true;\r\n        }\r\n        console.log(\"index-->\",index,\"arr-->\",arr,\"detectionNext-->\",this.detectionNext)\r\n    }\r\n    // 游戏场景 -->> 即将超越下一位好友节点\r\n    public getDetectionNext():object{\r\n        console.log(\"游戏场景\");\r\n        return this.detectionNext;\r\n    }\r\n    // 首页排行气泡\r\n    public getRankBubble():boolean{\r\n        console.log(\"排行气泡\",this.flicker)\r\n        return  this.flicker;\r\n    }\r\n    // 判断是不是自己\r\n    private isSelf(obj:object):number{\r\n        let self:string = this.avatarUrl.substring(0,this.avatarUrl.lastIndexOf('/'));\r\n        let other:string = obj[\"avatarUrl\"].substring(0,obj[\"avatarUrl\"].lastIndexOf('/'));\r\n        let res:number;\r\n        if(self == other){\r\n            res = 1;\r\n        }else{\r\n            res = 0;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n"]}